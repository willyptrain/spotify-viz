{"version":3,"sources":["components/login/final.png","util/url.js","util/auth.js","components/common/Redirect.jsx","components/login/index.jsx","components/common/navbar/Navbar.js","components/sidebar/Sidebar.js","components/home/Home.js","components/logout/Logout.js","components/graphs/GenreMappings.js","components/graphs/GenreGraphs.js","components/artist/ArtistPage.js","components/dashboard/FetchDashTracks.js","components/dashboard/FetchUserWelcome.js","components/dashboard/FetchDashArtists.js","components/dashboard/GenreChart.js","components/dashboard/Dash.js","components/top_artists/FetchArtists.js","components/top_artists/ArtistPage.js","components/top_artists/TopArtists.js","components/top_albums/FetchAlbums.js","components/top_albums/AlbumGraph.js","components/top_albums/RelatedAlbums.js","components/top_albums/TopAlbums.js","components/top_albums/PopularityChart.js","components/search/SearchTracks.js","components/top_tracks/FetchTracks.js","components/top_tracks/RelatedTracks.js","components/top_tracks/TrackGraph.js","components/top_tracks/TopTracks.js","components/favorites/PlaylistButtons.js","components/favorites/FavTracks.js","components/favorites/UserFavorites.js","components/track/TrackPage.js","components/recommendations/RecommendedPage.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","getUrlParams","vars","window","location","href","replace","m","key","value","config","headers","registerSpotify","code","Promise","resolve","reject","axios","post","split","then","res","data","err","logout","get","Redirect","props","console","log","url","LinearProgress","customTheme","global","font","alignContent","align","alignSelf","justify","gap","colors","text","dark","light","Login","redirectToSpotify","a","redirect","setState","redirectUrl","state","params","this","setUserInfo","history","userInfo","id","push","user","style","position","width","height","left","backgroundSize","particles","number","density","enable","value_area","Grid","container","className","alignItems","spacing","marginTop","item","xs","sm","md","lg","Box","elevation","fill","size","pad","Grommet","theme","borderRadius","opacity","animation","border","color","responsive","background","basis","round","src","logoImage","top","Button","primary","label","onClick","Component","React","useStyles","makeStyles","root","display","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","enteringScreen","menuButton","marginRight","paper","hide","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","toolbar","justifyContent","padding","right","mixins","customizeToolbar","minHeight","content","flexGrow","userLinks","action","variant","type","class","guestLinks","useStylesSearch","float","input","flex","iconButton","divider","margin","MiniDrawer","classes","classesSearch","useTheme","useState","open","setOpen","searchVal","searchTerm","searchValue","setSearchValue","hideDropdown","setHideDropdown","dropdown","setDropdown","preview","setPreview","playback","uri","token","cookie","track","catch","load_preview","icons","image","link","searchTracks","event","preventDefault","searchDropdown","keyword","oldState","tracks","search","items","artist_info","onChange","useCallback","e","muiTheme","createTheme","palette","green","secondary","searchRedirect","CssBaseline","Drawer","clsx","Toolbar","backgroundColor","IconButton","aria-label","edge","direction","Divider","List","map","icon","index","ListItem","button","component","ListItemIcon","ListItemText","status","ThemeProvider","autoPlay","classNames","loopIcon","Paper","autocomplete","onSubmit","InputBase","placeholder","onKeyDown","toLowerCase","target","searchFunc","length","orientation","ListItemAvatar","Avatar","alt","name","Logout","useEffect","fontFamily","Mappings","username","chartReference","createRef","scores","genreLabels","dataset","labels","datasets","ref","GenreGraphs","ArtistPage","onClose","artist_uri","desktop","breakpoint","max","min","paritialVisibilityGutter","tablet","mobile","artist_data","album_info","albums","external_urls","spotify","followers","total","genres","images","popularity","genre_data","settings","autoplay","dots","infinite","slidesToShow","slidesToScroll","speed","autoplaySpeed","Card","handleClose","Icon","Typography","gutterBottom","options","rotation","Math","PI","circumference","title","scale","ticks","yAxis","pointLabels","fontSize","fontColor","legend","radius","album","tracks_page","FetchDashTracks","setTracks","top_tracks","track_name","artist","FetchUserWelcome","user_info","CardMedia","objectFit","image_url","CardContent","slice","toUpperCase","bottom","artists_page","FetchDashArtists","artists","setArtists","top_artists","artist_name","GenreChart","range","chart","angleLines","suggestedMin","suggestedMax","Dash","overflow","full","Distribution","values","CircularProgress","FetchArtists","isCardFunction","handleChange","spacer","clicked","nextProps","componentDidMount","fetch","info","boxShadow","join","TopArtists","artist_side","handleSubmit","new_value","bind","Tabs","indicatorColor","textColor","Tab","show","FetchAlbums","setAlbums","scroll","isMounted","AlbumGraph","changeFeature","mounted","feature","names","borderColor","formControl","minWidth","selectEmpty","marginBottom","Select","labelId","MenuItem","scales","yAxes","gridLines","drawBorder","plugins","filler","propagate","Alert","RelatedAlbums","playTrack","play","player","pause","album_name","popularities","track_names","previews","disabled","saveTrack","disabled_keys","current","favoriteTrack","added","favs","favorited","unfavoriteTrack","in_favorites","reason","tracks_in_album","ids","audio","Array","CardHeader","subheader","Snackbar","autoHideDuration","severity","TopAlbums","sidePane","render","changeTab","maxHeight","SearchTracks","term","sort_by","TableContainer","Table","TableHead","TableRow","TableCell","scope","trunc","FetchTracks","handleHover","bool","temp","k","hovering","prev","onMouseEnter","onMouseLeave","RelatedTracks","track_ids","notif","song_names","header","fontWeight","tableHeader","refresh_related","TrackGraph","TopTracks","showGraph","graphTrack","PlaylistButtons","userHasPlaylist","hasPlaylist","getUserPlaylist","deleteFavoritesPlaylist","createFavoritesPlaylist","playlist_id","clearFavorites","clearFavsHelper","reload","playlistId","playlistUrl","FavTracks","loadTracks","handleDelete","trackId","trackName","artistName","imageId","previewId","filter","UserFavorites","AlbumList","track_id","selected_id","scrollIntoView","selected","TabbedTracks","setValue","AppBar","TrackPage","album_tracks","RecommendedTracksPanel","recommended","RecommendedPage","new_val","getRecommendedTracks","mappings","long_term_genres","selectedGenre","0","25","50","75","100","genre","getTracks","long_genre_scores","short_genre_scores","short_term_genres","subscription","user_id","user_url","Slider","colorPrimary","defaultValue","getAriaValueText","aria-labelledby","step","marks","valueLabelDisplay","App","currStatus","currInfo","rel","exact","path","match","Boolean","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.d9b901d3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/final.202a6d83.png\";","//returns access token\r\nexport function getUrlParams() {\r\n    const vars = {};\r\n    const parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, (m, key, value) => {\r\n      vars[key] = value;\r\n    });\r\n    return vars;\r\n  }\r\n  \r\n  export function removeHashParams(value) {\r\n    if (typeof value !== 'string') return '';\r\n    const split = value.split('#');\r\n    return split[0];\r\n  }\r\n  \r\n  export function getHashParams() {\r\n    const hashParams = {};\r\n    let e;\r\n    const r = /([^&;=]+)=?([^&;]*)/g;\r\n    const q = window.location.hash.substring(1);\r\n  \r\n    while (e = r.exec(q)) {\r\n      hashParams[e[1]] = decodeURIComponent(e[2]);\r\n    }\r\n    return hashParams;\r\n  }","import axios from 'axios';\r\nimport { removeHashParams } from './url';\r\nimport { getRequestOptions } from './general';\r\n\r\nconst config = { \r\n  headers: {  \r\n    'Content-Type': 'application/json',\r\n    'Access-Control-Allow-Origin': '*'\r\n  }\r\n}\r\n\r\nexport function getLoginRedirect() {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get('/auth/redirect-spotify')\r\n      .then(res => resolve(res.data), err => reject(err));\r\n  });\r\n}\r\n\r\nexport function registerSpotify(code) {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .post('/auth/user', { code: removeHashParams(code) }, config)\r\n      .then(\r\n        res => resolve(res.data),\r\n        err => reject(err)\r\n      );\r\n  });\r\n}\r\n\r\nexport function getSpotifyUser() {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get('/auth/user')\r\n      .then(\r\n        res => resolve(res.data),\r\n        err => reject(err),\r\n      );\r\n  });\r\n}\r\n\r\nexport function logout() {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get('/auth/logout')\r\n      .then(\r\n        res => resolve(res),\r\n        err => reject(err)\r\n      );\r\n  });\r\n}","import React from 'react';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\n// const Redirect = (props) => window.location = props.url;\r\n\r\n\r\n// export default Redirect;\r\nexport default function Redirect(props) {\r\n    console.log(props.url);\r\n    window.location = props.url;\r\n    return (\r\n    <div>\r\n        <div>\r\n            <LinearProgress />Loading...\r\n        </div>\r\n\r\n    </div>\r\n\r\n    );\r\n\r\n}","import React, { Component } from 'react';\r\n//import Button from '@material-ui/core/Button';\r\nimport Redirect from '../common/Redirect';\r\nimport { getUrlParams } from '../../util/url';\r\nimport { getLoginRedirect, registerSpotify } from '../../util/auth';\r\nimport './login.css';\r\nimport Card from '@material-ui/core/Card';\r\nimport Button from '@material-ui/core/Button';\r\nimport logoImage from \"./final.png\";\r\nimport { Header } from 'semantic-ui-react';\r\nimport { Box, Grommet, Text } from 'grommet';\r\nimport { Analytics } from 'grommet-icons';\r\nimport { Pie } from 'react-chartjs-2';\r\nimport Particles from 'react-particles-js';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst customTheme = {\r\n  global: {\r\n    font: 'Montserrat',\r\n    alignContent: 'center',\r\n    align: 'center',\r\n    alignSelf: 'center',\r\n    justify: 'center',\r\n    gap: 'large',\r\n    colors: {\r\n      // all colors could be either a string or a dark and light object\r\n      text: {\r\n        dark: '#DFE0E3',\r\n        light: '#DFE0E3',\r\n      },\r\n      // or simply as a string:\r\n      // text: \"#456789\",\r\n    },\r\n  },\r\n};\r\n\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { redirectUrl: '' }\r\n  }\r\n\r\n  redirectToSpotify = async () => {\r\n    const redirect = await getLoginRedirect();\r\n    this.setState({ redirectUrl: redirect });\r\n  }\r\n  \r\n\r\n  async componentDidMount() {\r\n    const params = getUrlParams();\r\n    const code = params.code || null;\r\n    const { setUserInfo, history, userInfo } = this.props;\r\n    console.log(code);\r\n    if (userInfo && userInfo.id) {\r\n      history.push('/');\r\n      return;\r\n    };\r\n    if (!code) return;\r\n\r\n    const user = await registerSpotify(code);\r\n    setUserInfo(user);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.redirectUrl) {\r\n      return <Redirect url={this.state.redirectUrl} />\r\n    }\r\n\r\n    return (\r\n        <div id='full-screen'>\r\n          <div style={{position: 'absolute', width:'100%', height:'100%'}}>\r\n                <Particles  style={{position: 'absolute', left:'0px',backgroundSize: 'cover', width:'100%', height:'100%'}}\r\n              params={{ \r\n                particles: { \r\n                  number: { \r\n                    value: 100,\r\n                    density: { \r\n                      enable: true, \r\n                      value_area: 800,\r\n                    } \r\n                  }, \r\n                }, \r\n              }} \r\n            /> \r\n            </div>\r\n\r\n             <Grid container className=\"grid-container\"\r\n          alignItems=\"center\"\r\n          justify=\"center\" spacing={0}>\r\n          <Grid style={{marginTop:'20vh'}} item xs={3} sm={3} md={3} lg={3}>\r\n\r\n                      <Box elevation=\"large\" className=\"login-card\" fill=\"true\" size=\"medium\"\r\n              pad=\"small\" align='center' alignSelf='center' alignContent=\"center\" justify=\"center\"\r\n            >\r\n\r\n\r\n              <Grommet theme={customTheme} >\r\n            <Box style={{borderRadius: '1%', opacity: '0.9'}} animation=\"fadeIn\" border={{size: \"medium\",color: \"#DFE0E3\"}} responsive=\"true\" elevation=\"xlarge\" background={{color: '#1A1919'}} basis=\"medium\" round=\"none\" pad=\"medium\"  gap=\"medium\" alignContent=\"center\" justify=\"center\" alignSelf=\"center\" align=\"center\">\r\n                <img src={logoImage} style={{height: '100px'}} />\r\n                <h4 style={{position: 'relative', top: '-18px'}} size=\"100%\" color=\"#DFE0E3\">Explore your Spotify listening history and <br></br> gain insights about your habits by logging in below.</h4>\r\n\r\n                <div id='login-button'>\r\n                    <Button className=\"login-btn-item\" style={{background: '#6fd862'}} primary label=\"Login with Spotify\" onClick={this.redirectToSpotify}>Login with Spotify</Button>\r\n                </div>\r\n            </Box>\r\n            </Grommet>\r\n            </Box>\r\n            </Grid>\r\n            </Grid>\r\n            \r\n            <particles/>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Login;\r\n\r\n\r\n","import React from \"react\";\r\nimport './Navbar.css';\r\nimport {Button, Navbar, Nav, NavDropdown, Form, FormControl} from 'react-bootstrap';\r\nimport {logout} from '../../../util/auth.js';\r\n\r\nclass NavBar extends React.Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n      }\r\n    render(){\r\n        const userLinks = (\r\n            <Nav.Link href= \"/logout\" onClick={logout}>Logout</Nav.Link>\r\n        );\r\n        const guestLinks = (\r\n            <Nav.Link href=\"/login\">Login</Nav.Link>\r\n        );\r\n        return(\r\n            <Navbar className=\"top-navbar\" bg=\"light\" expand=\"lg\">\r\n                <Navbar.Brand href=\"/\">Spotify-Viz</Navbar.Brand>\r\n                <Navbar.Toggle className=\"navBar-font\" aria-controls=\"basic-navbar-nav\" />\r\n                <Navbar.Collapse className=\"navBar-font\" id=\"basic-navbar-nav\">\r\n                {this.props.userInfo === `Not logged in` ? guestLinks : userLinks}\r\n                    <Nav className=\"mr-auto\">\r\n                    <NavDropdown title=\"Listening History\" className=\"navBar-font\" id=\"basic-nav-dropdown\">\r\n                        <NavDropdown.Item href=\"/top_tracks\">Top Tracks</NavDropdown.Item>\r\n                        <NavDropdown.Item href=\"/top_albums\">Top Albums</NavDropdown.Item>\r\n                        <NavDropdown.Item href=\"/top_artists\">Top Artists</NavDropdown.Item>\r\n                        <NavDropdown.Divider />\r\n                        {/*<NavDropdown.Item href=\"#action/3.4\">Separated link</NavDropdown.Item>*/}\r\n                    </NavDropdown>\r\n                    <NavDropdown title=\"Graphs\" className=\"navBar-font\" id=\"basic-nav-dropdown\">\r\n                        <NavDropdown.Item href=\"/graphs\">Artists</NavDropdown.Item>\r\n                        <NavDropdown.Item href=\"#action/3.2\">Albums</NavDropdown.Item>\r\n                        <NavDropdown.Item href=\"#action/3.3\">Playlists</NavDropdown.Item>\r\n                        <NavDropdown.Divider />\r\n                        <NavDropdown.Item href=\"#action/3.4\">My Listening</NavDropdown.Item>\r\n                    </NavDropdown>\r\n                    </Nav>\r\n                    <Form inline>\r\n                    <FormControl type=\"text\" placeholder=\"Search\" className=\"mr-sm-2\" />\r\n                    <Button variant=\"outline-success\">Search</Button>\r\n                    </Form>\r\n                </Navbar.Collapse>\r\n            </Navbar>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NavBar;","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport List from '@material-ui/core/List';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport HomeIcon from'@material-ui/icons/Home';\r\nimport LibraryMusicIcon from '@material-ui/icons/LibraryMusic';\r\nimport AlbumIcon from '@material-ui/icons/Album';\r\nimport PersonOutlineIcon from '@material-ui/icons/PersonOutline';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport Link from '@material-ui/core/Link';\r\nimport {logout} from '../../util/auth.js';\r\nimport './sidebar.css'\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport Redirect from '../../components/common/Redirect.jsx';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport StarIcon from '@material-ui/icons/Star';\r\n\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core';\r\nimport { AudioPlayer } from 'mui-audio-player';\r\nimport createTheme from '@material-ui/core/styles/createMuiTheme';\r\nimport green from '@material-ui/core/colors/green';\r\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\r\nimport { BrowserView,MobileView,isBrowser,isMobile} from \"react-device-detect\";\r\n\r\n\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  paper: {\r\n   background: 'red',   \r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  drawerOpen: {\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n    background: 'rgba(21,21,21,1)',\r\n    color: '#DFE0E3'\r\n  },\r\n  drawerClose: {\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: 'hidden',\r\n    width: theme.spacing(7) + 1,\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(9) + 1,\r\n    },\r\n    background: 'rgba(21,21,21,1)',\r\n    color: '#DFE0E3'\r\n  },\r\n  toolbar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: theme.spacing(0, 1),\r\n    position: 'absolute',\r\n    right: '0px',\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  customizeToolbar: {\r\n    minHeight: 64,\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nconst userLinks = (\r\n  <form action=\"/logout\">\r\n    <input variant=\"outlined\" type=\"submit\" class=\"logs-user\" value=\"Logout\" />\r\n</form>\r\n\r\n);\r\nconst guestLinks = (\r\n\r\n        <form action=\"/login\">\r\n    <input variant=\"outlined\" type=\"submit\" class=\"logs-user\" value=\"Login\" />\r\n        </form>\r\n\r\n);\r\n\r\nconst useStylesSearch = makeStyles((theme) => ({\r\n  root: {\r\n    padding: '2px 4px',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    width: 400,\r\n    float: 'right',\r\n    marginRight: '3%'\r\n  },\r\n  input: {\r\n    marginLeft: theme.spacing(1),\r\n    flex: 1,\r\n  },\r\n  iconButton: {\r\n    padding: 10,\r\n  },\r\n  divider: {\r\n    height: 28,\r\n    margin: 4,\r\n  },\r\n}));\r\n\r\n\r\n\r\nexport default function MiniDrawer(userInfo) {\r\n  const classes = useStyles();\r\n  const classesSearch = useStylesSearch();\r\n  const theme = useTheme();\r\n  const [open, setOpen] = React.useState(false);\r\n  let searchVal = 'searchTerm' in userInfo ? userInfo.searchTerm : '';\r\n  const [searchValue, setSearchValue] = React.useState(searchVal);\r\n  const [hideDropdown, setHideDropdown] = React.useState(true);\r\n  const [dropdown, setDropdown] = React.useState([]);\r\n\r\n  const [preview, setPreview] = React.useState(false);\r\n\r\n\r\n    const load_preview = (data) => {\r\n\r\n          let id = data.uri;\r\n          let token = cookie.get('access_token');\r\n          axios.get(`/api/trackPage/${id}/${token}/`)\r\n            .then(res => {\r\n                console.log(res.data);\r\n                setPreview(res.data.track['preview_url']);\r\n                console.log(res.data.track['preview_url']);\r\n            })\r\n            .catch(err => {\r\n                console.log('yo')\r\n                console.log(err)\r\n            })\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n  if(userInfo.id && userInfo.playback) {\r\n      load_preview(userInfo.id);\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  const icons = [{\r\n      text: \"Home\",\r\n      image: <HomeIcon style={{color: '#DFE0E3'}} />,\r\n      link: \"/dashboard\",\r\n  }, {\r\n      text: \"My Tracks\",\r\n      image: <LibraryMusicIcon style={{color: '#DFE0E3'}}/>,\r\n      link: \"/top_tracks\"\r\n  },{\r\n      text: \"My Albums\",\r\n      image: <AlbumIcon style={{color: '#DFE0E3'}}/>,\r\n      link: \"/top_albums\",\r\n  }, {\r\n      text: \"My Artists\",\r\n      image: <PersonOutlineIcon style={{color: '#DFE0E3'}}/>,\r\n      link: \"/top_artists\"\r\n  },\r\n  {\r\n    text: \"My Favorites\",\r\n    image: <StarIcon style={{color: '#DFE0E3'}} />,\r\n    link: \"/favorites\",\r\n  },\r\n  {\r\n      text: \"Recommended\",\r\n      image: <TrendingUpIcon style={{color: '#DFE0E3'}}/>,\r\n      link: \"/recommended\"\r\n  }\r\n    ]\r\n\r\n\r\n\r\n  const graph_icons = [<BarChartIcon style={{color: '#DFE0E3'}}/>]\r\n  const handleDrawerOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const getAllTracks = (event) => {\r\n    event.preventDefault();\r\n    console.log(searchValue);\r\n  }\r\n\r\n  const searchTracks = (event) => {\r\n    event.preventDefault();\r\n  }\r\n\r\n  const searchDropdown = (keyword) => {\r\n    console.log(keyword);\r\n    let token = cookie.get('access_token');\r\n    axios.get(`/api/track/search/${keyword}/${token}`)\r\n        .then(res => {\r\n            console.log(res.data)\r\n            setDropdown(oldState => ({\r\n                tracks: res.data.search['tracks'].items,\r\n                artist_info: res.data.artist_info\r\n            }));\r\n        })\r\n        .catch(err => {\r\n            console.log(\"error :(\")\r\n            console.log(err)\r\n        })\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n  const searchKeyPress = (event) => {\r\n\r\n\r\n    if(event.key.toLowerCase() == \"enter\") {\r\n        setHideDropdown(true);\r\n        setSearchValue(event.target.value+event.key);\r\n        userInfo.searchFunc(searchValue)\r\n\r\n    } else if(event.key.toLowerCase() == \"backspace\") {\r\n        if(event.target.value.length <= 1) {\r\n            setHideDropdown(true);\r\n            setSearchValue('');\r\n        } else {\r\n            setHideDropdown(false);\r\n            searchDropdown(event.target.value)\r\n            setSearchValue(event.target.value);\r\n\r\n        }\r\n\r\n    }\r\n    else {\r\n        console.log(event.target.value)\r\n         if(event.target.value+event.key != '') {\r\n            searchDropdown(event.target.value+event.key)\r\n            setHideDropdown(false);\r\n         } else if(event.target.value == '') {\r\n            setHideDropdown(true);\r\n         } else {\r\n            searchDropdown(event.target.value+event.key)\r\n            setHideDropdown(false);\r\n         }\r\n\r\n         setSearchValue(event.target.value+event.key);\r\n    }\r\n\r\n  }\r\n\r\n  const searchRedirect = () => {\r\n    if(userInfo.searchTerm) {\r\n        return (<Redirect url={`/search/${userInfo.searchTerm}`} />);\r\n    }\r\n  }\r\n\r\n  const onChange = React.useCallback(e => setDropdown(e.value), []);\r\n\r\n    const muiTheme = createTheme({\r\n      palette: {\r\n        type: 'light',\r\n        primary: green,\r\n        secondary: green,\r\n      },\r\n    });\r\n\r\n  return (\r\n\r\n\r\n\r\n    <div className={classes.root}>\r\n        <div>\r\n            {searchRedirect()}\r\n        </div>\r\n      <CssBaseline />\r\n\r\n      <Drawer\r\n        variant=\"permanent\"\r\n        className={clsx(classes.drawer, {\r\n          [classes.drawerOpen]: open,\r\n          [classes.drawerClose]: !open,\r\n        })}\r\n        classes={{\r\n          paper: clsx({\r\n            [classes.drawerOpen]: open,\r\n            [classes.drawerClose]: !open,\r\n          }),\r\n        }}\r\n      >\r\n      <Toolbar style={{backgroundColor: 'rgba(21,21,21,1)', color: '#DFE0E3'}} className={classes.customizeToolbar} >\r\n          {!open &&\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleDrawerOpen}\r\n            edge=\"start\"\r\n            className={clsx(classes.menuButton, {\r\n              [classes.hide]: open,\r\n            })}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          }\r\n\r\n\r\n\r\n\r\n        <div className={classes.toolbar}>\r\n          {open && <IconButton onClick={handleDrawerClose}>\r\n            {theme.direction === 'rtl' ? <ChevronRightIcon style={{ color: \"white\" }} /> : <ChevronLeftIcon style={{ color: \"white\" }} />}\r\n          </IconButton>}\r\n        </div>\r\n         </Toolbar>\r\n\r\n\r\n        <Divider />\r\n        <List>\r\n          {icons.map((icon, index) => (\r\n            <ListItem button component=\"a\" href={icon.link} key={icon.text}>\r\n              <ListItemIcon>{icon.image}</ListItemIcon>\r\n              <ListItemText primary={icon.text} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n        <Divider />\r\n\r\n\r\n              {open && ((userInfo.userInfo.status === `Not logged in` || userInfo.userInfo === null) ? guestLinks : userLinks)}\r\n      </Drawer>\r\n\r\n\r\n\r\n    {userInfo.playback && preview &&\r\n    <div className=\"playback\">\r\n        <ThemeProvider theme={muiTheme}>\r\n\r\n            <AudioPlayer\r\n          src={preview}\r\n          autoPlay={false} classNames={{\r\n            loopIcon: 'loop-icon',\r\n            text: 'text-audio'\r\n          }}\r\n        />\r\n        </ThemeProvider>\r\n\r\n    </div>\r\n    }\r\n\r\n\r\n     <div class=\"search-bar\">\r\n\r\n        <Paper autocomplete=\"off\" component=\"form\" onSubmit={searchTracks} className={classesSearch.root}>\r\n            <InputBase\r\n                className={classesSearch.input}\r\n                placeholder={searchValue}\r\n                onKeyDown={searchKeyPress}\r\n              />\r\n\r\n          <Divider className={classesSearch.divider} orientation=\"vertical\" />\r\n          <IconButton onClick={searchTracks} className={classesSearch.iconButton} aria-label=\"search\">\r\n            <SearchIcon onClick={searchTracks} />\r\n          </IconButton>\r\n        </Paper>\r\n       <div onChange={onChange} style={{width: '100%', float: 'right', display: (!hideDropdown ? 'block' : 'none')}}>\r\n\r\n        <div className=\"autocomplete\" onChange={onChange}>\r\n\r\n            {'tracks' in dropdown && dropdown['tracks'].length > 0 &&\r\n\r\n               <Paper className=\"dropdown-container\">\r\n                        <List>\r\n                {dropdown['tracks'].map((track, index) =>\r\n\r\n\r\n                        <ListItem divider={true} component=\"a\" href={`/track/${track['id']}`}>\r\n                            <ListItemAvatar>\r\n                              <Avatar\r\n                                alt=\"Album Image\"\r\n                                src={track['album']['images'][0]['url']}\r\n                              />\r\n                            </ListItemAvatar>\r\n                          <ListItemText primary={track['name']} secondary={track['artists'][0].name} />\r\n                        <Divider />\r\n                         </ListItem>\r\n                          )}\r\n\r\n</List>\r\n                    </Paper>\r\n\r\n\r\n\r\n            }\r\n\r\n        </div>\r\n       </div>\r\n\r\n      </div>\r\n\r\n\r\n\r\n\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { logout } from '../../util/auth';\r\nimport NavBar from '../common/navbar/Navbar';\r\nimport { Album } from 'react-spotify-api';\r\nimport { SpotifyApiContext} from 'react-spotify-api';\r\nimport Sidebar from '../sidebar/Sidebar';\r\nimport Login  from './../login/index.jsx';\r\n\r\nclass Home extends React.Component{\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(this.props);\r\n      }\r\n    async componentDidMount() {\r\n        const { userInfo, history } = this.props; \r\n    }\r\n    logout = async () => {\r\n        const res = await logout();\r\n            if (res.status === 200) {\r\n\r\n            }\r\n        }\r\n\r\n\r\n    render(){\r\n       if(this.props.userInfo == 'Not logged in' || (this.props.userInfo == null) || (this.props == null)) {\r\n           return (\r\n            <div>\r\n                <Login userInfo={this.props.userInfo}></Login>\r\n            </div>\r\n           );\r\n       } else {\r\n       console.log(this.props.userInfo);\r\n        return(\r\n            <div>\r\n            <Sidebar userInfo={this.props.userInfo}/>\r\n            <h1>Hello!\r\n            </h1>\r\n            </div>\r\n        );\r\n        }\r\n    }\r\n}\r\n\r\nexport default Home;","import {logout} from '../../util/auth.js';\r\nimport React, {useEffect, useState} from 'react';\r\n\r\n\r\nexport default function Logout(userInfo) {\r\n    console.log(userInfo);\r\n\r\n    useEffect(() => {\r\n        logout();\r\n\r\n\r\n    });\r\n\r\n\r\n    return(\r\n        <div style={{ marginTop: `64px`, marginLeft: '84px'}}>\r\n        <h1 style={{fontFamily: 'Montserrat !important'}}>You are now logged out.</h1>\r\n        <p><a style={{fontFamily: 'Montserrat !important'}} href=\"/\">Click here to return to the home page.</a></p>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useEffect, useState, shouldComponentUpdate} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { Doughnut, Radar, Polar } from 'react-chartjs-2';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\n\r\nclass Mappings extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.username = props.data;\r\n        this.chartReference = React.createRef();\r\n        this.token = cookie.get('access_token');\r\n        this.state = {\r\n            scores: [],\r\n            genreLabels: [],\r\n            dataset: [],\r\n            data: []\r\n        };\r\n\r\n    }\r\n    shouldComponentUpdate() {\r\n        if(this.state[\"data\"].length == 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    async componentDidMount()  {\r\n        axios.get(`/api/graphs/short_term/${this.token}`)\r\n        .then(res => {\r\n            this.setState({\r\n                scores: res.data.scores,\r\n                genreLabels: res.data.labels,\r\n                dataset: {\r\n                  data:res.data.scores,\r\n                  label:\"User Data\",\r\n                  backgroundColor: res.data.colors\r\n                },\r\n\r\n                data: [{\r\n                    labels: res.data.labels,\r\n                    datasets: [{\r\n                          data:res.data.scores,\r\n                          label:\"User Data\",\r\n                          backgroundColor: res.data.colors\r\n                    }]\r\n                }]\r\n            })\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        if(this.state[\"data\"].length > 0) {\r\n                return (\r\n\r\n\r\n          <Grid container className=\"grid-container\">\r\n            <Grid item xs={12} sm={6}>\r\n              <div style={{ backgroundColor:'none', border:'1px solid black' }}>\r\n                <Doughnut ref={this.chartReference}\r\n                data={this.state.data[0]} />\r\n              </div>\r\n           </Grid>\r\n           <Grid item xs={12} sm={6}>\r\n              <div style={{ backgroundColor:'white' }}>\r\n                <Polar ref={this.chartReference}\r\n                data={this.state.data[0]} />\r\n              </div>\r\n           </Grid>\r\n      </Grid>\r\n);\r\n       } else {\r\n       return (<div></div>)\r\n       }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default Mappings;","import React from \"react\";\r\nimport {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { logout } from '../../util/auth';\r\nimport NavBar from '../common/navbar/Navbar';\r\nimport { Album } from 'react-spotify-api';\r\nimport { SpotifyApiContext} from 'react-spotify-api';\r\nimport Mappings from './GenreMappings'\r\n\r\n\r\n\r\n\r\nclass GenreGraphs extends React.Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n      }\r\n    async componentDidMount() {\r\n        const { userInfo, history } = this.props;\r\n                console.log(this.props);\r\n\r\n    }\r\n    logout = async () => {\r\n        const res = await logout();\r\n            if (res.status === 200) {\r\n            }\r\n        }\r\n\r\n    render(){\r\n        const labels = <Mappings data={this.token}/>;\r\n        return(\r\n            <div>\r\n            <h1>Graphs</h1>\r\n            {labels}\r\n            </div>\r\n\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default GenreGraphs;\r\n","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { useParams } from \"react-router-dom\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {BrowserView, MobileView} from 'react-device-detect';\r\nimport Carousel from 'react-material-ui-carousel'\r\nimport 'react-multi-carousel/lib/styles.css';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport Slider from \"react-slick\";\r\nimport './artist.css'\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Doughnut, Radar } from 'react-chartjs-2';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ItemsCarousel from 'react-items-carousel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n//import \"font-awesome/css/font-awesome.css\";\r\nimport Icon from '@material-ui/core/Icon';\r\n\r\n\r\n\r\n\r\nclass ArtistPage extends React.Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {};\r\n        this.chartReference = React.createRef();\r\n        console.log(this.props);\r\n        this.onClose = this.props.onClose;\r\n        console.log(this.props.onClose);\r\n        this.artist_uri = this.props.id.uri;\r\n        this.token = cookie.get('access_token');\r\n\r\n\r\n        this.responsive = {\r\n          desktop: {\r\n    breakpoint: { max: 3000, min: 1024 },\r\n    items: 3,\r\n    paritialVisibilityGutter: 60\r\n  },\r\n  tablet: {\r\n    breakpoint: { max: 1024, min: 464 },\r\n    items: 2,\r\n    paritialVisibilityGutter: 50\r\n  },\r\n  mobile: {\r\n    breakpoint: { max: 464, min: 0 },\r\n    items: 1,\r\n    paritialVisibilityGutter: 30\r\n  }\r\n        };\r\n\r\n\r\n    }\r\n\r\n    async componentDidMount()  {\r\n        axios.get(`/api/artist/${this.artist_uri}/${this.token}`)\r\n        .then(res => {\r\n            console.log(res.data);\r\n            var artist_data = res.data.artist_info;\r\n            var album_info = res.data.albums;\r\n            console.log({\r\n                'external_url':artist_data.external_urls.spotify,\r\n                'followers': artist_data.followers.total,\r\n                'genres': artist_data.genres,\r\n                'images':artist_data.images,\r\n                'name': artist_data.name,\r\n                'popularity':artist_data.popularity,\r\n                'albums':album_info.items,\r\n                'genre_data':res.data.genre_data,\r\n                'dataset': {\r\n                    data: res.data.genre_data.scores,\r\n                    labels: res.data.genre_data.labels,\r\n                    backgroundColor: res.data.genre_data.colors\r\n                },\r\n                'data': [{\r\n                    labels: res.data.genre_data.labels,\r\n                    datasets: [{\r\n                        'data': res.data.genre_data.scores,\r\n                        'labels': res.data.genre_data.labels,\r\n                        'backgroundColor': res.data.genre_data.colors\r\n                    }]\r\n                }]\r\n\r\n            });\r\n            this.setState({\r\n                'external_url':artist_data.external_urls.spotify,\r\n                'followers': artist_data.followers.total,\r\n                'genres': artist_data.genres,\r\n                'images':artist_data.images,\r\n                'name': artist_data.name,\r\n                'popularity':artist_data.popularity,\r\n                'albums':album_info.items,\r\n                'genre_data':res.data.genre_data,\r\n                'dataset': {\r\n                    data: res.data.genre_data.scores,\r\n                    labels: res.data.genre_data.labels,\r\n                    backgroundColor: ['rgba(0,0,0,0.5)']\r\n                },\r\n                'data': [{\r\n                    labels: res.data.genre_data.labels,\r\n                    datasets: [{\r\n                        'data': res.data.genre_data.scores,\r\n                        'labels': res.data.genre_data.labels,\r\n                        'backgroundColor': ['rgba(90,240,159,0.5)']\r\n                    }]\r\n                }]\r\n\r\n            });\r\n            console.log(this.state);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n    }\r\n\r\n    handleClose() {\r\n        this.onClose();\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n\r\n\r\n        const breakPoints = [\r\n          { width: 1, itemsToShow: 1 },\r\n          { width: 550, itemsToShow: 2 },\r\n          { width: 768, itemsToShow: 3 },\r\n          { width: 1200, itemsToShow: 4 }\r\n        ];\r\n\r\n        if('external_url' in this.state) {\r\n\r\n            var settings = {\r\n              autoplay: true,\r\n              dots: false,\r\n              infinite: true,\r\n              slidesToShow: 5,\r\n              slidesToScroll: 1,\r\n              speed: 2000,\r\n              autoplaySpeed: 0\r\n\r\n            };\r\n\r\n\r\n            return(\r\n            <>\r\n            <BrowserView style={{height:'100%'}}>\r\n                <Grid style={{height:'100%', position:'relative', left:'0px', width:'100%'}} container className=\"grid-container\">\r\n                <Grid style={{height:'100%'}} item sm={10}>\r\n                    <Card className=\"artist-card\">\r\n                      <Grid container className='artist-top-container'>\r\n                        <Grid style={{height:'100%'}} item sm={6}>\r\n                           <div style={{height:'100%'}} className=\"artist-img-container\">\r\n                                <a href={this.state['external_url']}>\r\n                                    <img className=\"artist-img\" src={this.state['images'][0]['url']}  />\r\n                                </a>\r\n                            </div>\r\n                        </Grid>\r\n\r\n                        <Grid style={{height:'100%'}} item sm={6}>\r\n                             <div className=\"artist-info\">\r\n                            <IconButton className=\"exit-artist-modal\" onClick={() => this.handleClose()}>\r\n                                <Icon onClick={() => this.handleClose()} className=\"fa fa-times\" />\r\n                            </IconButton>\r\n                            <div className=\"artist-name-container\">\r\n                                <Typography className=\"artist-name\" style={{fontFamily: 'Montserrat'}}\r\n                                        gutterBottom variant=\"h3\" component=\"h3\">{this.state['name']}</Typography>\r\n                            </div>\r\n                            <div className=\"genre-doughnut\">\r\n                                <Radar ref={this.chartReference}\r\n                                data={this.state.data[0]} options={{\r\n                                    rotation: Math.PI,\r\n                                    circumference: Math.PI,\r\n                                       title: {\r\n                                            display: true,\r\n                                            position: \"center\",\r\n                                            text: 'Upcoming Meetings' },\r\n                                        scale: {\r\n                        ticks: {\r\n                            display: false\r\n                        },\r\n                        yAxis: {\r\n                            display: false\r\n                        },\r\n                        pointLabels: {\r\n                            fontSize: 16,\r\n                            fontColor: '#111111',\r\n                            fontFamily: \"'Montserrat','Roboto'\"\r\n                        }\r\n                    },\r\n                    legend: {\r\n                        display: false\r\n                    },\r\n                    radius: {\r\n                        fontSize: 24\r\n                    }\r\n                                }} />\r\n                            </div>\r\n                        </div>\r\n                        </Grid>\r\n                      </Grid>\r\n                      <Grid container alignItems=\"center\" justify=\"center\" >\r\n                        <Grid style={{height:'100%'}} item sm={11}>\r\n                            <div>\r\n                                <Paper className='carousel-bgd' elevation={3}>\r\n                                    <Slider {...settings}>\r\n\r\n                                    {\r\n\r\n                                        this.state.albums.map((album) =>\r\n                                            <img className=\"album-carousel-item\" src={album.images[0].url}\r\n                                                  />\r\n\r\n                                        )\r\n\r\n\r\n                                    }\r\n                                    </Slider>\r\n                                </Paper>\r\n                            </div>\r\n                        </Grid>\r\n                      </Grid>\r\n                 </Card>\r\n               </Grid>\r\n               </Grid>\r\n\r\n\r\n            </BrowserView>\r\n\r\n\r\n            <MobileView>\r\n                <Grid container className=\"grid-container\">\r\n                <Grid item xs={12}>\r\n                    <div className=\"artist-img\">\r\n                        <a href={this.state['external_url']}>\r\n                            <img src={this.state['images'][0]['url']} height={this.state['images'][1]['height']} width={this.state['images'][1]['width']} />\r\n                        </a>\r\n                    </div>\r\n               </Grid>\r\n               <p>{this.state['followers']}</p>\r\n               </Grid>\r\n            </MobileView>\r\n\r\n         </>\r\n\r\n\r\n\r\n            );\r\n        }\r\n        else {\r\n            return (<p></p>);\r\n        }\r\n    }\r\n}\r\n\r\nexport default ArtistPage;\r\n","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image, Button } from 'semantic-ui-react';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport './userinfo.css';\r\nimport StarIcon from '@material-ui/icons/Star';\r\n\r\nfunction tracks_page(e) {\r\n  e.preventDefault();\r\n  window.location = '/top_tracks';\r\n}\r\n\r\nexport function FetchDashTracks(data) {\r\n    console.log(data.data)\r\n    const [tracks, setTracks] = useState([]);\r\n    let token = cookie.get('access_token');\r\n    useEffect(() => {\r\n        axios.get(`/api/user/${data.data}/${token}/15/`)\r\n        .then(res => {\r\n            console.log(res.data.top_tracks)\r\n            setTracks(res.data.top_tracks)\r\n        })\r\n        .catch(err => {\r\n            console.log('yo')\r\n            console.log(err)\r\n        })\r\n    }, [data.data])\r\n    return(\r\n        <div>\r\n        <h2 class=\"list-title\" style={{marginTop: '10px'}}>Top Tracks</h2>\r\n        <List size=\"mini\">\r\n            {\r\n                tracks.map(track =>\r\n        <ListItem>\r\n           <ListItemAvatar>\r\n               <Avatar alt=\"Image\" src={track.image}/>\r\n          </ListItemAvatar>\r\n\r\n            <ListItemText\r\n                                primary={track.track_name}\r\n                            secondary={track.artist}\r\n                             />\r\n        </ListItem>)\r\n                }\r\n        </List>\r\n        <Button primary content=\"View more...\" onClick={tracks_page} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","import cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport React, {useEffect, useState} from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport './userinfo.css';\r\nimport { Typography } from '@material-ui/core';\r\nimport { Box } from '@material-ui/core';\r\nimport {FetchCurrentlyPlaying} from './FetchCurrentlyPlaying';\r\n\r\n\r\n\r\nexport default function FetchUserWelcome(data) {\r\n    let user_info = data.data;\r\n    let token = cookie.get('access_token');\r\n\r\n\r\n    console.log(user_info);\r\n\r\n    return(\r\n                <div class=\"list-title\" style={{height: '100%'}}>\r\n                    <CardMedia\r\n                      component=\"img\"\r\n                      alt=\"ProfileImage\"\r\n                      height=\"300\"\r\n                      style={{objectFit: 'cover', height: '80%'}}\r\n                      image={user_info.image_url}\r\n                      title={user_info.username}\r\n                    />\r\n                    <CardContent>\r\n                      <Typography gutterBottom variant=\"h5\" component=\"h2\" class=\"list-title\">\r\n                        {user_info.username.slice(0,1).toUpperCase() + user_info.username.slice(1)}\r\n                      </Typography>\r\n\r\n                      <Typography style={{position: 'relative', bottom: '10px'}} component=\"p\" class=\"list-title\">\r\n                        Followers: {user_info['followers']['total']}\r\n                      </Typography>\r\n                    </CardContent>\r\n                </div>\r\n\r\n    );\r\n}","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image, Button } from 'semantic-ui-react';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport './userinfo.css';\r\n\r\nfunction artists_page(e) {\r\n    e.preventDefault();\r\n    window.location = '/top_artists';\r\n  }\r\n\r\nexport function FetchDashArtists(data) {\r\n    console.log(data.data)\r\n    const [artists, setArtists] = useState([]);\r\n    let token = cookie.get('access_token');\r\n    useEffect(() => {\r\n        axios.get(`/api/user_artists/${data.data}/${token}/15/`)\r\n        .then(res => {\r\n            console.log(res.data)\r\n            setArtists(res.data.top_artists)\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }, [data.data])\r\n    return(\r\n        <div>\r\n        <h2 class=\"list-title\"  style={{marginTop: '10px'}}>Top Artists</h2>\r\n        <List size=\"mini\">\r\n            {\r\n                artists.map(artist =>\r\n                    <ListItem>\r\n                       <ListItemAvatar>\r\n                           <Avatar alt=\"Image\" src={artist.image}/>\r\n                      </ListItemAvatar>\r\n\r\n                        <ListItemText\r\n                                            primary={artist.artist_name}\r\n                                         />\r\n                    </ListItem>)\r\n                }\r\n        </List>\r\n        <Button primary content=\"View more...\" onClick={artists_page} />\r\n        </div>\r\n    );\r\n}\r\n","import cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport React, {useEffect, useState} from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport './userinfo.css';\r\nimport { Typography } from '@material-ui/core';\r\nimport { Box } from '@material-ui/core';\r\nimport {FetchCurrentlyPlaying} from './FetchCurrentlyPlaying';\r\nimport { Doughnut,Radar } from 'react-chartjs-2';\r\n\r\n\r\nexport default function GenreChart(data) {\r\n    let genre_info = data.data;\r\n    let range = data.range;\r\n    let chart = data.chart;\r\n    let chartReference = React.createRef();\r\n    let mobile = data.mobile;\r\n\r\n//    'data': [{\r\n//                    labels: fetch.labels,\r\n//                    datasets: [{\r\n//                        'data': fetch.scores,\r\n//                        'labels': fetch.labels,\r\n//                        'backgroundColor': fetch.colors\r\n//                    }]\r\n//                }]\r\n//long_genre_scores: (5) [76, 61, 51, 47, 41]\r\n//long_term_genres:\r\n//\r\n    if(data.range == \"short\") {\r\n        var data = [{\r\n            labels: data.data['short_term_genres'].slice(0,5),\r\n            datasets: [{\r\n                data: data.data['short_genre_scores'].slice(0,5),\r\n                labels: data.data['short_term_genres'].slice(0,5),\r\n                backgroundColor: chart == \"doughnut\" ? ['#f1a5ba', '#f5b565', '#fbd981', '#93dcdc', '#6cb8ee'] : 'rgba(108, 184, 238,0.6)'\r\n            }]\r\n        }]\r\n    }\r\n    else if(data.range == \"long\") {\r\n        var data = [{\r\n            labels: data.data['long_term_genres'].slice(0,5),\r\n            datasets: [{\r\n                data: data.data['long_genre_scores'].slice(0,5),\r\n                labels:  data.data['long_term_genres'].slice(0,5),\r\n                 backgroundColor: chart == \"doughnut\" ? ['#f1a5ba', '#f5b565', '#fbd981', '#93dcdc', '#6cb8ee'] : 'rgba(108, 184, 238,0.6)'\r\n            }],\r\n        }]\r\n    }\r\n    let token = cookie.get('access_token');\r\n    var titles = {\r\n        'short': 'Most Recent Genres',\r\n        'long': 'All Time Genres'\r\n    }\r\n    var title = titles[range];\r\n\r\n    return(\r\n                <div style={{height: '25vh'}}>\r\n                { chart == \"doughnut\" &&\r\n                    <Doughnut style={{height: '25vh'}} ref={chartReference}\r\n                                    data={data[0]} options={{\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: title,\r\n                                            fontFamily: 'Montserrat',\r\n                                            fontSize: '18'\r\n                                        },\r\n                                        legend: {\r\n                                            display:  mobile ? false : true,\r\n                                        },\r\n                                         responsive:  mobile ? false : true,\r\n\r\n                                    }} />\r\n\r\n                }\r\n                { chart == \"radar\" &&\r\n                     <Radar style={{height: '25vh'}} ref={chartReference}\r\n                                    data={data[0]} options={{\r\n                                    scale: {\r\n                                        angleLines: {\r\n                                            display: false\r\n                                        },\r\n                                        ticks: {\r\n                                            suggestedMin: 0,\r\n                                            suggestedMax: 0,\r\n                                            display: false\r\n                                        }\r\n                                    },\r\n                                    title: {\r\n                                            display: true,\r\n                                            text: title,\r\n                                            fontFamily: 'Montserrat',\r\n                                            fontSize: '18'\r\n                                        },\r\n                                    legend: {\r\n                                        position: \"bottom\",\r\n                                        display: false\r\n                                    },\r\n                                    responsive: mobile ? false : true\r\n                                    }\r\n\r\n                                    } />\r\n\r\n                }\r\n\r\n                </div>\r\n\r\n    );\r\n}","import React from \"react\";\r\nimport NavBar from '../common/navbar/Navbar';\r\nimport { Grommet, Distribution, Box, Text, grommet } from 'grommet';\r\nimport {FetchDashTracks} from './FetchDashTracks';\r\nimport FetchUserWelcome from './FetchUserWelcome';\r\nimport {FetchDashAlbums} from './FetchDashAlbums';\r\nimport {FetchDashArtists} from './FetchDashArtists';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport './userinfo.css';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport GenreChart from './GenreChart.js';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport {\r\n  BrowserView,\r\n  MobileView,\r\n  isBrowser,\r\n  isMobile\r\n} from \"react-device-detect\";\r\n\r\nclass Dash extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n\r\n  }\r\n\r\n\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/user_info/${token}/`)\r\n        .then(res => {\r\n            console.log(res.data);\r\n            this.setState(res.data[0]);\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('yo')\r\n            console.log(err)\r\n        })\r\n    }\r\n  \r\n\r\n    render(){\r\n      const user_info = this.props.userInfo;\r\n        return(\r\n        <div style={{ overflow: 'hidden', marginTop: `2vh`, marginLeft: '84px', width: '92%'}}>\r\n           <BrowserView>\r\n            {this.state['username'] &&\r\n            <Grommet style={{overflow: 'hidden', width: '100%',backgroundColor: \"#EBEBEB\"}} full>\r\n            <Distribution style={{overflow: 'hidden'}} margin=\"xsmall\" gap=\"none\"\r\n              fill\r\n              values={[\r\n                { value: 30, color: \"white\", overflow: false, title: \"Short term genres\", data: <GenreChart mobile={false} data={this.state} chart=\"doughnut\" range=\"short\" /> },\r\n                { value: 30, color: \"white\", overflow: false, title: \"Long term genres\", data: <GenreChart mobile={false} data={this.state} chart=\"radar\" range=\"long\" /> },\r\n                { value: 30, color: \"white\", overflow: false, title: \"\", data: <FetchUserWelcome data={this.state} /> },\r\n                { value: 25, color: \"white\", overflow: true, data: <FetchDashTracks data=\"long_term\" /> },\r\n                { value: 25, color: \"white\", overflow: true, data: <FetchDashArtists data=\"long_term\"/> }\r\n              ]}\r\n            >\r\n              {value => (\r\n\r\n                    <Card width=\"100%\" height=\"100%\" style={{backgroundColor: \"white\", overflow: value.overflow ? 'scroll': 'hidden'}} className=\"userinfo-card\">\r\n                        {value.data}\r\n                    </Card>\r\n\r\n              )}\r\n            </Distribution>\r\n          </Grommet>}\r\n          {!this.state['username'] &&\r\n          <div class=\"loading\">\r\n            <CircularProgress/>\r\n          </div>\r\n          }\r\n\r\n           </BrowserView>\r\n           <MobileView>\r\n            {this.state['username'] &&\r\n               <div style={{width: '80%'}}>\r\n                    <Card style={{backgroundColor: \"white\"}} className=\"userinfo-card\">\r\n                               <FetchUserWelcome data={this.state} />\r\n                    </Card>\r\n                    <Card height='25vh' style={{backgroundColor: \"white\", height: '25vh'}} className=\"userinfo-card\">\r\n                                <GenreChart height='25vh' mobile={true}  style={{height: '25vh'}} data={this.state} chart=\"doughnut\" range=\"short\" />\r\n                    </Card>\r\n                     <Card style={{backgroundColor: \"white\"}} className=\"userinfo-card\">\r\n                                <GenreChart data={this.state} mobile={true}  chart=\"radar\" range=\"long\" />\r\n                    </Card>\r\n\r\n\r\n               </div>\r\n             }\r\n\r\n           </MobileView>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Dash;\r\n","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './artists.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nexport function FetchArtists(data) {\r\n    console.log(data.data)\r\n    const [artists, setArtists] = useState([]);\r\n    const isCardFunction = (data.handleChange != null);\r\n        const spacer = data.clicked ? 3 : 2;\r\n\r\n\r\n\r\n    let token = cookie.get('access_token');\r\n    useEffect(() => {\r\n        axios.get(`/api/user_artists/${data.data}/${token}/50/`)\r\n        .then(res => {\r\n            console.log(res.data)\r\n            setArtists(res.data.top_artists)\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }, [data.data])\r\n\r\n\r\n    return(\r\n\r\n<div>\r\n    <Grid container className=\"grid-container\"\r\n  alignItems=\"center\"\r\n  justify=\"center\" spacing={0}>\r\n\r\n         {\r\n        artists.map((artist,index) =>\r\n            <Grid item xs={6} sm={spacer}>\r\n            {isCardFunction &&\r\n            <Card onClick={() => data.handleChange(artist)} className=\"topartists-card\">\r\n                    <CardMedia className=\"topartists-img\" image={artist.image}></CardMedia>\r\n                    <CardContent className=\"topartists-info\">\r\n                        <Typography className=\"music-title\" gutterBottom variant=\"h6\" component=\"h6\">{index+1}. {artist.artist_name}</Typography>\r\n                    </CardContent>\r\n            </Card>\r\n            }\r\n         </Grid>\r\n        )}\r\n\r\n      </Grid>\r\n      </div>\r\n    );\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './artists.css'\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport PropTypes from 'prop-types'\r\nimport { Doughnut } from 'react-chartjs-2';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\r\nimport Slider from \"react-slick\";\r\n\r\n\r\n\r\n\r\n\r\nclass ArtistPage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.chartReference = React.createRef();\r\n        this.nextProps = this.props;\r\n        this.state = {value: 'short_term', clicked: false,\r\n                            data: [], artist:this.props.artist};\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n            let token = cookie.get('access_token');\r\n\r\n        if(this.props != nextProps) {\r\n            this.nextProps = nextProps;\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        console.log(this.nextProps)\r\n        axios.get(`/api/artist/${this.nextProps.artist.uri}/${token}`)\r\n        .then(res => {\r\n            fetch = res.data;\r\n                this.setState(oldState => ({\r\n                    'clicked': true,\r\n                    'artist_info':fetch.info,\r\n                    'albums':fetch.albums.items\r\n                }));\r\n\r\n\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n            render() {\r\n\r\n\r\n            var settings = {\r\n              autoplay: true,\r\n              dots: false,\r\n              infinite: true,\r\n              slidesToShow: 3,\r\n              slidesToScroll: 1,\r\n              speed: 2000,\r\n              autoplaySpeed: 0\r\n\r\n            };\r\n\r\n           if(this.state.artist_info) {\r\n                       const genres = this.state.artist_info.genres;\r\n\r\n            return(\r\n\r\n        <div style={{backgroundColor: 'white'}}>\r\n            <Card>\r\n                <CardContent>\r\n\r\n                        <img style={{height:'250px',width:'250px', borderRadius: '100%', boxShadow:'2px 2px 5px 0.1px black'}} src={this.state.artist_info.images[0].url} />\r\n                    <h1>{this.state.artist_info.name.toUpperCase()}</h1>\r\n                    <Grid container className=\"artist-grid-container\">\r\n                        <Grid item sm={12}>\r\n                            <div class=\"genre-container\">\r\n                                <h4>Genres:</h4>\r\n                                <p>&nbsp;{genres.slice(0,Math.min(genres.length,4)).join(\", \")}</p>\r\n                            </div>\r\n                        </Grid>\r\n                        <Grid item sm={12}>\r\n                             <div class=\"genre-container\" style={{backgroundColor: 'white'}}>\r\n                                <h4>Popularity: </h4>\r\n                                <p>&nbsp;{this.state.artist_info.popularity}</p>\r\n                              </div>\r\n                        </Grid>\r\n                    </Grid>\r\n                    <Slider {...settings}>\r\n\r\n                                    {\r\n\r\n                                        this.state.albums.map((album) =>\r\n                                            <Card>\r\n                                            <img className=\"album-carousel-item\" src={album.images[0].url}\r\n                                                  />\r\n                                            </Card>\r\n\r\n                                        )\r\n\r\n\r\n                                    }\r\n                    </Slider>\r\n                </CardContent>\r\n\r\n            </Card>\r\n\r\n              </div>\r\n            );\r\n\r\n            }\r\n            return (<div><h4>Loading...</h4></div>);\r\n            }\r\n\r\n}\r\n\r\nexport default ArtistPage;\r\n//                                {genres.slice(0,Math.min(genres.length,4)).map((genre) => {genre[0].toUpperCase() + genre.substr(1)})}\r\n//\r\n","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport {FetchArtists} from './FetchArtists.js';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport './artists.css'\r\nimport {Distribution, Box, Text} from 'grommet';\r\nimport { BrowserView,MobileView,isBrowser,isMobile} from \"react-device-detect\";\r\nimport ArtistPage from './ArtistPage.js'\r\n\r\nclass TopArtists extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {value: 'short_term', artist_side: 100};\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.value = 'short_term'\r\n    }\r\n    handleChange = (artist) => {\r\n        console.log(artist)\r\n        if(this.state.artist != artist) {\r\n            this.setState(oldState => ({\r\n                value: oldState.value,\r\n                clicked: true,\r\n                artist: artist,\r\n                artist_side: 70\r\n            }));\r\n        }\r\n\r\n\r\n\r\n      }\r\n    handleSubmit = (event, new_value) => {\r\n\r\n        this.setState({value: new_value, clicked: false, artist_side: 100});\r\n    }\r\n\r\n\r\n     async componentDidMount() {\r\n      }\r\n\r\n    render(){\r\n        const artist_list = <FetchArtists data={this.state.value}/>;\r\n\r\n        return(\r\n        <div style={{marginLeft: '30px'}} >\r\n        <BrowserView>\r\n            <div class=\"browser-container\" style={{ marginLeft: '0px'}}>\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <label>\r\n                        <Tabs\r\n                            value={this.state[\"value\"]}\r\n                            indicatorColor=\"primary\"\r\n                            textColor=\"primary\"\r\n                            onChange={this.handleSubmit}\r\n                            aria-label=\"disabled tabs example\"\r\n                          >\r\n                                <Tab className=\"track-tab\" value=\"short_term\" label=\"Month\" />\r\n                                <Tab className=\"track-tab\" value=\"medium_term\" label=\"6 Months\" />\r\n                                <Tab className=\"track-tab\" value=\"long_term\" label=\"All Time\" />\r\n                          </Tabs>\r\n                    </label>\r\n                    </form>\r\n\r\n\r\n                    {this.state['clicked'] && <Distribution\r\n                  values={[\r\n                    { value: this.state.artist_side, className:\"top-tracks\", show: true, data: <FetchArtists clicked={this.state['clicked']} handleChange={this.handleChange} data={this.state.value} /> },\r\n                    { value: 100-this.state.artist_side, className:\"track-graph\", show: (this.state.clicked && (this.state.artist)), data: <ArtistPage handleChange={this.handleChange} {...this.state} /> }\r\n\r\n                  ]}\r\n                >\r\n                  {value => (\r\n                    <Box className={value.className} pad=\"small\" fill>\r\n                      {value.show && value.data}\r\n                    </Box>\r\n                  )}\r\n                </Distribution>}\r\n\r\n                {!this.state['clicked'] && <Distribution\r\n                  values={[\r\n                    { value: 100, className:\"top-tracks\", show: true, data: <FetchArtists clicked={this.state['clicked']} handleChange={this.handleChange} data={this.state.value} /> },\r\n                  ]}\r\n                >\r\n                  {value => (\r\n                    <Box className={value.className} pad=\"small\" fill>\r\n                      {value.show && value.data}\r\n                    </Box>\r\n                  )}\r\n                </Distribution>}\r\n\r\n\r\n            </div>\r\n            </BrowserView>\r\n\r\n\r\n        <MobileView>\r\n            <div style={{ marginTop: `0px`, marginLeft: '30px'}}>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <label>\r\n                    <Tabs\r\n                        value={this.state[\"value\"]}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        onChange={this.handleChange}\r\n                        aria-label=\"disabled tabs example\"\r\n                      >\r\n                            <Tab className=\"track-tab\" value=\"short_term\" label=\"Week\" />\r\n                            <Tab className=\"track-tab\" value=\"medium_term\" label=\"Month\" />\r\n                            <Tab className=\"track-tab\" value=\"long_term\" label=\"All Time\" />\r\n                      </Tabs>\r\n                </label>\r\n                </form>\r\n                <Distribution\r\n                  values={[\r\n                    { value: 100, className:\"top-tracks\", show: true, data: <FetchArtists clicked={this.state['clicked']} handleChange={this.handleChange} data={this.state.value} /> },\r\n                  ]}\r\n                >\r\n                  {value => (\r\n                    <Box className={value.className} pad=\"small\" fill>\r\n                      {value.show && value.data}\r\n                    </Box>\r\n                  )}\r\n                </Distribution>\r\n\r\n\r\n            </div>\r\n            </MobileView>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TopArtists;","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './topalbums.css'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nexport function FetchAlbums(data) {\r\n    const [albums, setAlbums] = useState([]);\r\n    const isCardFunction = (data.handleChange != null);\r\n    const scroll = data.scroll ? 'scroll' : 'hidden';\r\n    const spacer = data.scroll ? 3 : 2;\r\n\r\n\r\n    let token = cookie.get('access_token');\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        axios.get(`/api/user_albums/${data.data}/${token}/50`)\r\n        .then(res => {\r\n            if(isMounted) {\r\n                console.log(res.data)\r\n                setAlbums(res.data.albums)\r\n            }\r\n\r\n        })\r\n\r\n        return () => { isMounted = false };\r\n    }, [data.data])\r\n\r\n\r\n\r\n    return(\r\n\r\n<div style={{overflow: scroll, height: 'auto'}}>\r\n\r\n            <Grid container className=\"grid-container\"\r\n          alignItems=\"center\"\r\n          justify=\"center\" spacing={0}>\r\n\r\n                 {\r\n                albums.map((album,index) =>\r\n                    <Grid item xs={6} sm={spacer} md={spacer} lg={spacer}>\r\n                    {isCardFunction &&\r\n                        <Card onClick={() => data.handleChange(album)} className=\"track-card\">\r\n                            <CardMedia className=\"topalbums-img\" image={album.images[0].url}></CardMedia>\r\n                            <CardContent className=\"topalbums-info\">\r\n                                <Typography className=\"music-title\" gutterBottom variant=\"h6\" component=\"h6\">{index+1}. {album.name} by {album.artists[0].name}</Typography>\r\n                            </CardContent>\r\n                    </Card>\r\n                    }\r\n\r\n                 </Grid>\r\n                )}\r\n\r\n              </Grid>\r\n\r\n\r\n      </div>\r\n    );\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './topalbums.css'\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport TopAlbums from './TopAlbums.js';\r\nimport PropTypes from 'prop-types'\r\nimport { Line } from 'react-chartjs-2';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\n\r\n\r\nclass AlbumGraph extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(this.props);\r\n        this.nextProps = this.props;\r\n            this.chartReference = React.createRef();\r\n            this.mounted = false;\r\n            this.state = {value: 'short_term', clicked: false,\r\n                            data: [], artist:this.props.artist, feature:'valence', classes: null};\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n      \r\n    \r\n    \r\n\r\n     componentWillReceiveProps(nextProps) {\r\n\r\n        let token = cookie.get('access_token');\r\n\r\n        if(this.props.artist.uri != nextProps.artist.uri) {\r\n            this.nextProps = nextProps;\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        this.mounted = true;\r\n        axios.get(`/api/album/${this.nextProps.artist.uri}/${token}`)\r\n        .then(res => {\r\n            if(this.mounted){\r\n                fetch = res.data;\r\n                console.log(fetch.labels);\r\n                this.chartReference = React.createRef();\r\n                if(fetch.scores[this.state.feature].length > 1) {\r\n                    this.setState(oldState => ({\r\n                        'clicked': true,\r\n                        'labels': fetch.labels,\r\n                        'album_info':fetch.album_info,\r\n                        'data': [{\r\n                            labels: fetch.names,\r\n                            'datasets': [{\r\n                                'data': fetch.scores[oldState.feature],\r\n                                'labels': oldState.feature,\r\n                                fill: true,\r\n                                backgroundColor: \"rgba(75,192,192,0.2)\",\r\n                                borderColor: \"rgba(75,192,192,1)\"\r\n                            }\r\n                            ]\r\n                        }]\r\n\r\n\r\n                    }));\r\n                }\r\n                else {\r\n                    this.setState(oldState => ({\r\n                        'clicked': true,\r\n                        'album_info':fetch.album_info,\r\n                        'data': null\r\n\r\n\r\n\r\n                    }));\r\n                }\r\n\r\n            }\r\n            console.log(this.state);\r\n                    return () => { this.mounted = false };\r\n\r\n\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    changeFeature = () => {\r\n        let token = cookie.get('access_token');\r\n        this.mounted = true;\r\n        axios.get(`/api/album/${this.nextProps.artist.uri}/${token}`)\r\n        .then(res => {\r\n            if(this.mounted){\r\n                fetch = res.data;\r\n                this.chartReference = React.createRef();\r\n                if(fetch.scores[this.state.feature].length > 1) {\r\n                    this.setState(oldState => ({\r\n                        'clicked': true,\r\n                        'labels': fetch.labels,\r\n                        'album_info':fetch.album_info,\r\n                        'data': [{\r\n                            labels: fetch.names,\r\n                            'datasets': [{\r\n                                'data': fetch.scores[oldState.feature],\r\n                                'labels': oldState.feature,\r\n                                fill: true,\r\n                                backgroundColor: \"rgba(75,192,192,0.2)\",\r\n                                borderColor: \"rgba(75,192,192,1)\"\r\n                            }\r\n                            ]\r\n                        }]\r\n\r\n\r\n                    }));\r\n                }\r\n                else {\r\n                    this.setState(oldState => ({\r\n                        'clicked': true,\r\n                        'album_info':fetch.album_info,\r\n                        'data': null\r\n\r\n\r\n\r\n                    }));\r\n                }\r\n\r\n            }\r\n            console.log(this.state);\r\n                    return () => { this.mounted = false };\r\n\r\n\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n\r\n    componentWillUnmount() {\r\n        this.mounted = false;\r\n\r\n    }\r\n\r\n      \r\n        handleChange = (event) => {\r\n          this.setState({\r\n              'feature' : event.target.value\r\n          })\r\n          this.changeFeature();\r\n        };\r\n    \r\n    \r\n    useStyles = makeStyles((theme) => ({\r\n        formControl: {\r\n          margin: theme.spacing(1),\r\n          minWidth: 120,\r\n        },\r\n        selectEmpty: {\r\n          marginTop: theme.spacing(2),\r\n        },\r\n      }));\r\n\r\n            render(){\r\n\r\n                \r\n           if(this.state.data) {\r\n            return(\r\n\r\n        <div style={{backgroundColor: 'white', marginBottom: '200px'}}>\r\n            <FormControl>\r\n        <Select\r\n          labelId=\"demo-simple-select-label\"\r\n          id=\"demo-simple-select\"\r\n          value={this.state.feature}\r\n          onChange={this.handleChange}\r\n        >\r\n          <MenuItem value={'valence'}>Positivity</MenuItem>\r\n          <MenuItem value={'danceability'}>Danceability</MenuItem>\r\n          <MenuItem value={'energy'}>Energy</MenuItem>\r\n          <MenuItem value={'instrumentalness'}>Instrumentalness</MenuItem>\r\n          <MenuItem value={'liveness'}>Liveness</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n        <Card>\r\n            {this.state.clicked && (this.state.data[0]['datasets'][0]['data'].length > 1) &&\r\n                <Line ref={this.chartReference}\r\n                                data={this.state.data[0]} options={{\r\n            title:{\r\n              display:true,\r\n              text:`${this.state.labels[this.state.feature]} Score by Track`,\r\n              fontSize:20,\r\n              fontFamily: 'Montserrat'\r\n            },\r\n            legend:{\r\n              display:false\r\n            },\r\n            scales: {\r\n                yAxes: [{\r\n                  gridLines: {\r\n                    drawBorder: false,\r\n                  },\r\n                  display: false\r\n                }]\r\n              },\r\n            plugins: {\r\n            filler: {\r\n                propagate: true\r\n            }\r\n        }\r\n          }} />\r\n\r\n\r\n           }\r\n\r\n             </Card>\r\n              </div>\r\n            );\r\n\r\n            }\r\n            var info = this.state.album_info;\r\n            return (<Card><CardContent><p>Cannot construct graph for songs in {info.name}</p></CardContent></Card>);\r\n            }\r\n\r\n        }\r\n\r\nexport default AlbumGraph;\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './topalbums.css'\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport ArtistPage from '../artist/ArtistPage.js'\r\nimport TopAlbums from './TopAlbums.js';\r\nimport PropTypes from 'prop-types'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\n\r\n\r\nclass Alert extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.props = props\r\n    }\r\n\r\n    render() {\r\n        return <MuiAlert elevation={6} variant=\"filled\" {...this.props} />;\r\n\r\n    }\r\n }\r\n\r\n\r\n\r\n\r\nclass RelatedAlbums extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.nextProps = this.props;\r\n        this.mounted = false;\r\n        this.added = {};\r\n        this.state = {value: 'short_term', clicked: false,\r\n                            data: null, artist:this.props.artist, favorited: {}};\r\n\r\n\r\n    }\r\n\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n\r\n        let token = cookie.get('access_token');\r\n\r\n        if(this.props != nextProps) {\r\n            this.nextProps = nextProps;\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        this.mounted = true;\r\n        axios.get(`/api/album_track_info/${this.nextProps.artist.id}/${token}`)\r\n        .then(res => {\r\n            fetch = res.data;\r\n            \r\n            if(this.mounted) {\r\n                this.setState(oldState => ({\r\n                    'clicked':true,\r\n                    'album_name':fetch.album_name,\r\n                    'album_info':fetch.tracks_in_album,\r\n                    'popularities':fetch.popularities,\r\n                    'track_names':fetch.track_names,\r\n                    'track_ids': fetch.ids,\r\n                    'previews':fetch.audio,\r\n                    'current':null,\r\n                    'username':fetch.username,\r\n                    'disabled':new Array(fetch.audio.length).fill(false),\r\n                    'notif': false\r\n                 }));\r\n            }\r\n            return () => {this.mounted = false}\r\n        })\r\n\r\n\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n\r\n    }\r\n\r\n     componentWillUnmount() {\r\n        this.mounted = false;\r\n    }\r\n\r\n\r\n    playTrack = (url, play) => {\r\n        if(url) {\r\n            if(url != this.state['current'] && this.state['current']) {\r\n                this.player.pause();\r\n                this.player.src = url;\r\n                this.setState(oldState => ({\r\n                    'clicked':true,\r\n                    'album_name':oldState.album_name,\r\n                    'album_info':oldState.album_info,\r\n                    'popularities':oldState.popularities,\r\n                    'track_names':oldState.track_names,\r\n                    'previews':oldState.previews,\r\n                    'play':true,\r\n                    'current':url,\r\n                    'username':oldState.username,\r\n                    'disabled':oldState.disabled,\r\n                    'notif': false\r\n                }));\r\n                this.player.play();\r\n            }\r\n            else {\r\n              this.player.src = url;\r\n              if(!play) {\r\n                  this.player.play()\r\n                   this.setState(oldState => ({\r\n                        'clicked':true,\r\n                        'album_name':oldState.album_name,\r\n                        'album_info':oldState.album_info,\r\n                        'popularities':oldState.popularities,\r\n                        'track_names':oldState.track_names,\r\n                        'previews':oldState.previews,\r\n                        'play':true,\r\n                        'current':url,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'notif': false\r\n                    }));\r\n                }\r\n                else {\r\n                    this.player.pause();\r\n                    this.setState(oldState => ({\r\n                        'clicked':true,\r\n                        'album_name':oldState.album_name,\r\n                        'album_info':oldState.album_info,\r\n                        'popularities':oldState.popularities,\r\n                        'track_names':oldState.track_names,\r\n                        'previews':oldState.previews,\r\n                        'play': false,\r\n                        'current':url,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'notif': false\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    saveTrack = (track,index) => {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/track/save/${track['id']}/${this.state['username']}/${token}`)\r\n                    .then(res => {\r\n\r\n                        var disabled_keys = this.state['disabled'];\r\n                        disabled_keys[index] = true\r\n                        this.setState(oldState => ({\r\n                            'clicked':true,\r\n                            'album_name':oldState.album_name,\r\n                            'album_info':oldState.album_info,\r\n                            'popularities':oldState.popularities,\r\n                            'track_names':oldState.track_names,\r\n                            'previews':oldState.previews,\r\n                            'play': oldState.play,\r\n                            'current':oldState.current,\r\n                            'username':oldState.username,\r\n                            'disabled': disabled_keys,\r\n                            'notif': true\r\n                        }));\r\n\r\n\r\n\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err);\r\n                        console.log(\"error :(\");\r\n                    })\r\n    }\r\n\r\n    favoriteTrack = (track, index) => {\r\n        let token = cookie.get('access_token');\r\n\r\n        axios.get(`/api/save_to_db/${track}/${token}`)\r\n                .then(res => {\r\n                    this.added[track] = false;\r\n                    let favs = this.state['favorited'];\r\n                    favs[track] = true;\r\n                    var disabled_keys = this.state['disabled'];\r\n                    disabled_keys[index] = true;\r\n                    this.setState(oldState => ({\r\n                        'clicked':true,\r\n                        'album_name':oldState.album_name,\r\n                        'album_info':oldState.album_info,\r\n                        'popularities':oldState.popularities,\r\n                        'track_names':oldState.track_names,\r\n                        'previews':oldState.previews,\r\n                        'play': oldState.play,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'notif': false,\r\n                        'favorited': favs,\r\n                }));\r\n\r\n                console.log(this.state.favorited);\r\n\r\n\r\n\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    console.log(\"error :((\");\r\n                })\r\n\r\n        }   \r\n\r\n        unfavoriteTrack = (track, index) => {\r\n            let token = cookie.get('access_token');\r\n    \r\n            axios.get(`/api/delete_from_db/${track}/favorites/${token}`)\r\n                    .then(res => {\r\n                        this.added[track] = false;\r\n                        this.state.favorited[track] = false;\r\n                        var disabled_keys = this.state['disabled'];\r\n                        disabled_keys[index] = true;\r\n                        this.setState(oldState => ({\r\n                            'clicked':true,\r\n                            'album_name':oldState.album_name,\r\n                            'album_info':oldState.album_info,\r\n                            'popularities':oldState.popularities,\r\n                            'track_names':oldState.track_names,\r\n                            'previews':oldState.previews,\r\n                            'play': oldState.play,\r\n                            'username':oldState.username,\r\n                            'disabled':oldState.disabled,\r\n                            'notif': false,\r\n                            'in_favorites': this.in_favorites,\r\n                            'favorited': this.favorited\r\n                    }));\r\n    \r\n    \r\n    \r\n                    })\r\n                    .catch(err => {\r\n    \r\n                        console.log(\"error :(\");\r\n                    })\r\n    \r\n            }\r\n\r\n\r\n        handleClose = (event, reason) => {\r\n                 this.setState(oldState => ({\r\n                            'clicked':true,\r\n                            'album_name':oldState.album_name,\r\n                            'album_info':oldState.album_info,\r\n                            'popularities':oldState.popularities,\r\n                            'track_names':oldState.track_names,\r\n                            'previews':oldState.previews,\r\n                            'play': oldState.play,\r\n                            'current':oldState.current,\r\n                            'username':oldState.username,\r\n                            'disabled': oldState.disabled,\r\n                            'notif': false\r\n                  }));\r\n\r\n\r\n            };\r\n\r\n\r\n            render() {\r\n\r\n            var player_on = !this.state['play'] ? \"Play\" : \"Stop\"\r\n\r\n            if(this.state.album_info) {\r\n\r\n\r\n            return(\r\n\r\n        <div style={{backgroundColor: 'white', overflow: 'scroll'}}>\r\n        <Card>\r\n        <CardHeader style={{fontFamily: 'Montserrat !important'}} title={this.state.album_name} subheader=\"Tracks in Album\" />\r\n        <CardContent>\r\n        <List>\r\n        {this.state.clicked &&\r\n                    this.state.track_names.map((name, index) =>\r\n                        <ListItem>\r\n                            <ListItemText\r\n                                primary={name}\r\n                            secondary={this.state.artist.artists['0']['name']}\r\n                             />\r\n\r\n                            {this.state.favorited[this.state['track_ids'][index]] &&\r\n                             <Button onClick={() => this.unfavoriteTrack(this.state['track_ids'][index], index)} > \r\n                    \r\n                             <StarIcon/>\r\n                             \r\n                             \r\n                             </Button>\r\n                            }\r\n                            {!this.state.favorited[this.state['track_ids'][index]] &&\r\n                             <Button onClick={() => this.favoriteTrack(this.state['track_ids'][index], index)} > \r\n                    \r\n                             <StarBorderIcon/>\r\n                             \r\n                             \r\n                             </Button>\r\n                            }\r\n\r\n                             {this.state['previews'][index] &&\r\n                             <div>\r\n                             <Button onClick={() => this.playTrack(this.state['previews'][index], this.state['play'])}>\r\n                             {(!(this.state['play'] && (this.state['current'] == this.state['previews'][index]))) ? \"Play\" : \"Stop\"}\r\n                             </Button>\r\n                             </div>\r\n                             }\r\n                             {\r\n                             this.state['username']  && !this.state['disabled'][index] &&\r\n                             <Button onClick={() => this.saveTrack(this.state['track_ids'][index], index)}>+</Button>\r\n                               }\r\n\r\n                        </ListItem>\r\n\r\n                    )\r\n                }\r\n            </List>\r\n        </CardContent>\r\n            </Card>\r\n\r\n                    <>\r\n                        <audio ref={ref => this.player = ref} />\r\n                    </>\r\n\r\n                 <Snackbar open={this.state['notif']} autoHideDuration={2000} onClose={this.handleClose}>\r\n                    <Alert onClose={this.handleClose} severity=\"success\">\r\n                      Track Added to library!\r\n                    </Alert>\r\n                  </Snackbar>\r\n\r\n\r\n\r\n              </div>\r\n            );\r\n\r\n            }\r\n            return (<div>Loading...</div>);\r\n            }\r\n\r\n\r\n}\r\n\r\nexport default RelatedAlbums;\r\n\r\n","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport {FetchAlbums} from './FetchAlbums.js';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport './topalbums.css'\r\nimport {Distribution, Box, Text} from 'grommet';\r\nimport AlbumGraph from './AlbumGraph.js';\r\nimport RelatedAlbums from './RelatedAlbums.js';\r\nimport { BrowserView,MobileView,isBrowser,isMobile} from \"react-device-detect\";\r\nimport PopularityChart from './PopularityChart.js';\r\n\r\n\r\nclass TopAlbums extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {value: 'short_term', sidePane: 100};\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.value = 'short_term'\r\n        console.log(\"YEEEEEE\");\r\n    }\r\n\r\n   handleChange = (artist) => {\r\n\r\n\r\n        if(!(this.state.artist) || this.state.artist.id != artist.id) {\r\n            this.setState(oldState => ({\r\n                value: oldState.value,\r\n                clicked: true,\r\n                artist: artist,\r\n                sidePane: 50\r\n            }));\r\n            this.render();\r\n        }\r\n        else {\r\n            this.setState(oldState => ({\r\n                value: oldState.value,\r\n                clicked: true,\r\n                artist: artist,\r\n                sidePane: 50\r\n            }));\r\n        }\r\n\r\n\r\n      }\r\n\r\n    changeTab = (event, new_value) => {\r\n        event.preventDefault();\r\n        this.setState({value: new_value});\r\n    }\r\n\r\n    handleSubmit = (event, new_value) => {\r\n        console.log(event);\r\n        console.log(new_value);\r\n        event.preventDefault();\r\n        this.setState({value: new_value});\r\n    }\r\n\r\n\r\n\r\n    render(){\r\n        const track_list = <FetchAlbums data={this.state.value}/>;\r\n\r\n\r\n        return(\r\n            <div style={{marginLeft: '30px'}} class=\"browser-container\">\r\n                <BrowserView>\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <label>\r\n                    <Tabs\r\n                        value={this.state[\"value\"]}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        onChange={this.handleSubmit}\r\n                        aria-label=\"\"\r\n                      >\r\n                            <Tab className=\"track-tab\" value=\"short_term\" label=\"Month\" />\r\n                            <Tab className=\"track-tab\" value=\"medium_term\" label=\"6 Months\" />\r\n                            <Tab className=\"track-tab\" value=\"long_term\" label=\"All Time\" />\r\n                      </Tabs>\r\n                </label>\r\n                </form>\r\n\r\n                <div>\r\n\r\n                {this.state['sidePane'] != 100 &&\r\n                    <Distribution style={{maxHeight:'100vh'}} className=\"dist-box-albums\"\r\n                  values={[\r\n                    { value: 50, className:\"top-albums\", show: true, data: <FetchAlbums scroll={this.state['sidePane'] != 100} handleChange={this.handleChange} data={this.state.value} /> },\r\n                    { value: 25, className:\"album-graph\", show: (this.state.clicked && this.state.artist), data: <AlbumGraph style={{maxHeight: '35vh'}} {...this.state} artist={this.state.artist} /> },\r\n                    { value: 25, className:\"related-albums\", show: (this.state.clicked && (this.state.artist)), data: <RelatedAlbums style={{maxHeight: '35vh'}} {...this.state} /> }\r\n                  ]} >\r\n                  {value => (\r\n                <Box className={value.className} pad=\"small\" fill>\r\n                  {value.show && value.data}\r\n                </Box>\r\n              )}\r\n            </Distribution>\r\n              }\r\n\r\n                {this.state['sidePane'] == 100 &&\r\n                    <Distribution style={{maxHeight:'100vh'}} className=\"dist-box-albums\"\r\n                  values={[\r\n                    { value: this.state['sidePane'], className:\"top-albums\", show: true, data: <FetchAlbums handleChange={this.handleChange} data={this.state.value} /> } ]}>\r\n                    {value => (\r\n                <Box className={value.className} pad=\"small\" fill>\r\n                  {(value.show) && value.data}\r\n                </Box>\r\n              )}\r\n            </Distribution>\r\n                }\r\n\r\n\r\n\r\n\r\n\r\n                </div>\r\n            </BrowserView>\r\n\r\n            <MobileView>\r\n            <form onSubmit={this.handleSubmit}>\r\n                    <label>\r\n                    <Tabs\r\n                        value={this.state[\"value\"]}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        onChange={this.handleSubmit}\r\n                        aria-label=\"disabled tabs example\"\r\n                      >\r\n                            <Tab className=\"track-tab\" value=\"short_term\" label=\"Week\" />\r\n                            <Tab className=\"track-tab\" value=\"medium_term\" label=\"Month\" />\r\n                            <Tab className=\"track-tab\" value=\"long_term\" label=\"All Time\" />\r\n                      </Tabs>\r\n                </label>\r\n                </form>\r\n             <FetchAlbums handleChange={this.handleChange} data={this.state.value} />\r\n            </MobileView>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TopAlbums;","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './topalbums.css'\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport TopAlbums from './TopAlbums.js';\r\nimport PropTypes from 'prop-types'\r\nimport { Doughnut } from 'react-chartjs-2';\r\nimport { CircularProgressbar } from 'react-circular-progressbar';\r\nimport 'react-circular-progressbar/dist/styles.css';\r\n\r\n\r\n\r\n\r\n\r\nclass PopularityChart extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n         this.nextProps = this.props;\r\n            this.chartReference = React.createRef();\r\n\r\n            this.state = {value: 'short_term', clicked: false,\r\n                            data: [], artist:this.props.artist, feature:'valence'};\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n            let token = cookie.get('access_token');\r\n\r\n        if(this.props.artist.uri != nextProps.artist.uri) {\r\n            this.nextProps = nextProps;\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        console.log(this.nextProps.artist.artist)\r\n        axios.get(`/api/album/${this.nextProps.artist.uri}/${token}`)\r\n        .then(res => {\r\n            fetch = res.data;\r\n            console.log(fetch);\r\n                this.setState(oldState => ({\r\n                    'clicked': true,\r\n                    'album_info':fetch.album_info,\r\n\r\n\r\n\r\n                }));\r\n\r\n\r\n\r\n\r\n\r\n            console.log(this.state);\r\n\r\n\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n            render() {\r\n\r\n\r\n           if(this.state.album_info) {\r\n            return(\r\n\r\n        <div style={{backgroundColor: 'white'}}>\r\n\r\n        <h6>Popularity</h6>\r\n<CircularProgressbar value={this.state.album_info.popularity} text={`${this.state.album_info.popularity}`} strokeWidth={12} />;\r\n\r\n              </div>\r\n            );\r\n\r\n            }\r\n            return (<div><h4>Loading...</h4></div>);\r\n            }\r\n\r\n}\r\n\r\nexport default PopularityChart;\r\n","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport {Distribution, Box, Text} from 'grommet';\r\nimport {\r\n  BrowserView,\r\n  MobileView,\r\n  isBrowser,\r\n  isMobile\r\n} from \"react-device-detect\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport axios from 'axios';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport List from '@material-ui/core/List';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport './search.css';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\n\r\nclass SearchTracks extends React.Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(props.id.term);\r\n        this.state = {id: props.id.term, tracks: [], sort_by: 'track'};\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n\r\n        axios.get(`/api/track/search/${this.state['id']}/${token}`)\r\n        .then(res => {\r\n            console.log(res.data)\r\n            this.setState(oldState => ({\r\n                id: oldState.id,\r\n                tracks: res.data.search['tracks'].items,\r\n                artist_info: res.data.artist_info\r\n            }));\r\n        })\r\n        .catch(err => {\r\n            console.log(\"error :(\")\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div style={{position: 'relative', marginLeft: '84px', width:'90%'}}>\r\n                <h1 className=\"search-header\">Search Results</h1>\r\n                <TableContainer style={{marginLeft: '10px'}} component={Paper}>\r\n                  <Table aria-label=\"simple table\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"table-header\" align=\"left\">Track Name</TableCell>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"table-header\" align=\"left\">Artist</TableCell>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"table-header\" align=\"right\">Duration</TableCell>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"table-header\" align=\"right\">Popularity</TableCell>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"table-header\" align=\"center\">Genre</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n\r\n                    {this.state['tracks'] && this.state['tracks'].map((track,index) =>\r\n            <TableRow key={track['name']} component=\"a\" href={`/track/${track['id']}`}>\r\n              <TableCell className=\"table-results\" component=\"th\" scope=\"row\">\r\n                <div className=\"avatar-head\">\r\n                    <Avatar className=\"table-avatar\" src={track['album']['images'].length > 0 ? track['album']['images'][0]['url'] : \"\"} />&emsp; <h6 className=\"track-name\">{track.name}</h6>\r\n                </div>\r\n              </TableCell>\r\n              <TableCell className=\"table-results\" align=\"left\">{track['artists'][0]['name']}</TableCell>\r\n              <TableCell className=\"table-results\" align=\"right\">{Math.trunc(track['duration_ms']/60000) + \":\" +\r\n                        Math.trunc((track['duration_ms']/60000-Math.trunc(track['duration_ms']/60000))*60)}</TableCell>\r\n              <TableCell className=\"table-results\" align=\"right\">{track['popularity']}</TableCell>\r\n              <TableCell className=\"table-results\" align=\"center\">{this.state['artist_info'][index]['genres'].join(\", \")}</TableCell>\r\n            </TableRow>\r\n\r\n\r\n\r\n\r\n                     )}\r\n\r\n               </Table>\r\n               </TableContainer>\r\n\r\n\r\n            </div>\r\n\r\n        );\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default SearchTracks;\r\n","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './tracks.css'\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport ArtistPage from '../artist/ArtistPage.js'\r\nimport TopTracks from './TopTracks.js';\r\nimport PropTypes from 'prop-types';\r\nimport PlayCircleOutlineIcon from '@material-ui/icons/PlayCircleOutline';\r\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled';\r\nimport Fab from '@material-ui/core/Fab';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass FetchTracks extends React.Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(props);\r\n//        const [tracks, setTracks] = useState([]);\r\n//        const [track, setTrack] = useState([]);\r\n//        const [artistId, setArtistId] = useState([]);\r\n        this.k = 50;\r\n        this.data = this.props.data;\r\n         this.state = {value: this.props.data, clicked: this.props.clicked, hovering: new Array(this.k).fill(false)};\r\n        this.isCardFunction = (this.props.handleChange != null);\r\n        this.spacer = this.props.clicked ? 4 : 2;\r\n        this.scroll = this.props.clicked ? 'scroll' : 'hidden';\r\n        this.hovering = false;\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n\r\n        let token = cookie.get('access_token');\r\n            axios.get(`/api/user/${this.props.data}/${token}/${this.k}`)\r\n            .then(res => {\r\n                this.setState(oldState => ({\r\n                    'value':  this.state['value'],\r\n                    'tracks': res.data.top_tracks,\r\n                    'hovering':oldState.hovering\r\n                }));\r\n            })\r\n            .catch(err => {\r\n                console.log('error :(')\r\n                console.log(err)\r\n            })\r\n    }\r\n    async componentDidUpdate(prev) {\r\n\r\n        if(prev.value != this.props['value']) {\r\n\r\n            let token = cookie.get('access_token');\r\n                axios.get(`/api/user/${this.props.data}/${token}/${this.k}`)\r\n                .then(res => {\r\n                    this.setState(oldState => ({\r\n                        'value':  oldState.value,\r\n                        'tracks': res.data.top_tracks,\r\n                        'hovering':oldState.hovering\r\n                    }));\r\n                })\r\n                .catch(err => {\r\n                    console.log('error :(')\r\n                    console.log(err)\r\n                })\r\n\r\n        }\r\n\r\n     }\r\n\r\n\r\n        handleHover = (index, bool) => {\r\n            var temp = this.state['hovering'];\r\n            temp[index] = bool;\r\n            this.setState(oldState => ({\r\n                'value':  oldState.value,\r\n                'tracks': oldState.tracks,\r\n                'hovering':temp\r\n            }));\r\n\r\n        }\r\n        render() {\r\n\r\n            if('tracks' in this.state) {\r\n                return(\r\n\r\n                <div style={{height: 'auto', overflow: this.scroll}}>\r\n                    <Grid container className=\"grid-container\"\r\n                  alignItems=\"center\"\r\n                  justify=\"center\" spacing={0}>\r\n\r\n                         {\r\n                        this.state['tracks'].map((track,index) =>\r\n                            <Grid item xs={6} sm={this.spacer} md={this.spacer} lg={this.spacer}>\r\n                            {this.isCardFunction &&\r\n                                <Card onMouseEnter={() => this.handleHover(index, true)} onMouseLeave={() => this.handleHover(index, false)}\r\n                                        onClick={() => this.props.handleChange(track)} className=\"track-card\">\r\n\r\n                                <CardMedia className=\"track-img\" image={track.image}></CardMedia>\r\n\r\n\r\n\r\n\r\n\r\n                            </Card>\r\n                            }\r\n\r\n                         </Grid>\r\n                        )}\r\n\r\n                      </Grid>\r\n                      </div>\r\n                    );\r\n            }\r\n            else {\r\n                return (<div>Loading...</div>);\r\n            }\r\n\r\n\r\n\r\n            }\r\n\r\n}\r\nexport default FetchTracks;\r\n//\r\n//           <CardContent className=\"track-info\">\r\n//                                        <Typography className=\"music-title\" gutterBottom variant=\"h6\" component=\"h6\">{index+1}. {track.track_name} by {track.artist}</Typography>\r\n//                                    </CardContent>","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './tracks.css'\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport ArtistPage from '../artist/ArtistPage.js'\r\nimport TopTracks from './TopTracks.js';\r\nimport PropTypes from 'prop-types'\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport AutorenewIcon from '@material-ui/icons/Autorenew';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\n\r\nclass Alert extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.props = props\r\n    }\r\n\r\n    render() {\r\n        return <MuiAlert elevation={6} variant=\"filled\" {...this.props} />;\r\n\r\n    }\r\n }\r\n\r\n\r\n\r\nclass RelatedTracks extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n            this.added = {};\r\n            this.chartReference = React.createRef();\r\n            this.nextProps = this.props;\r\n            this.state = {value: 'short_term', clicked: false,\r\n                            data: null, artist:this.props.artist, play: false, notif: false, favorited: {}};\r\n\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n            let token = cookie.get('access_token');\r\n\r\n        if(this.props != nextProps) {\r\n            this.nextProps = nextProps\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/related_tracks/${this.nextProps.artist.id}/${token}`)\r\n        .then(res => {\r\n            fetch = res.data;\r\n            this.setState({\r\n                'clicked':true,\r\n                'artists':fetch.artists,\r\n                'track_names':fetch.song_names,\r\n                'images':fetch.images,\r\n                'previews':fetch.audio,\r\n                'current':null,\r\n                'track_ids':fetch.ids,\r\n                'username':fetch.username,\r\n                'disabled':new Array(fetch.audio.length).fill(false),\r\n                'notif': false,\r\n                'in_favorites': fetch.in_favorites,\r\n                \r\n            });\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    refresh_related() {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/related_tracks/${this.nextProps.artist.id}/${token}`)\r\n        .then(res => {\r\n            fetch = res.data;\r\n            this.setState({\r\n                'clicked':true,\r\n                'artists':fetch.artists,\r\n                'track_names':fetch.song_names,\r\n                'images':fetch.images,\r\n                'previews':fetch.audio,\r\n                'current':null,\r\n                'track_ids':fetch.ids,\r\n                'username':fetch.username,\r\n                'disabled':new Array(fetch.audio.length).fill(false),\r\n                'notif': false\r\n            })\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n     playTrack = (url, play) => {\r\n        if(url) {\r\n            if(url != this.state['current'] && this.state['current']) {\r\n                this.player.pause();\r\n                this.player.src = url;\r\n                this.setState(oldState => ({\r\n                    'clicked':oldState.clicked,\r\n                    'artists':oldState.artists,\r\n                    'track_names':oldState.track_names,\r\n                    'images':oldState.images,\r\n                    'previews':oldState.previews,\r\n                    'play':true,\r\n                    'current':url,\r\n                    'track_ids':oldState.track_ids,\r\n                    'username':oldState.username,\r\n                    'disabled':oldState.disabled,\r\n                    'notif': false,\r\n                    'in_favorites': oldState.in_favorites,\r\n\r\n                }));\r\n                this.player.play();\r\n            }\r\n            else {\r\n              this.player.src = url;\r\n              if(!play) {\r\n                  this.player.play()\r\n                   this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':true,\r\n                        'current':url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'notif': false\r\n                    }));\r\n\r\n                }\r\n                else {\r\n                    this.player.pause();\r\n                    this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':false,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'notif':false\r\n                    }));\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n        saveTrack = (track, index) => {\r\n            let token = cookie.get('access_token');\r\n\r\n            axios.get(`/api/track/save/${track}/${this.state['username']}/${token}`)\r\n                    .then(res => {\r\n                        this.added[track] = true;\r\n                        var disabled_keys = this.state['disabled'];\r\n                        disabled_keys[index] = true;\r\n                        this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':oldState.play,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':disabled_keys,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'favorited': this.state.favorited,\r\n                        'notif': true\r\n                    }));\r\n\r\n\r\n\r\n                    })\r\n                    .catch(err => {\r\n\r\n                        console.log(\"error :(\");\r\n                    })\r\n\r\n    }\r\n\r\n    favoriteTrack = (track, index) => {\r\n        let token = cookie.get('access_token');\r\n\r\n        axios.get(`/api/save_to_db/${track}/${token}`)\r\n                .then(res => {\r\n                    this.added[track] = false;\r\n                    let favs = this.state['favorited'];\r\n                    favs[track] = true;\r\n                    var disabled_keys = this.state['disabled'];\r\n                    disabled_keys[index] = true;\r\n                    this.setState(oldState => ({\r\n                    'clicked':oldState.clicked,\r\n                    'artists':oldState.artists,\r\n                    'track_names':oldState.track_names,\r\n                    'images':oldState.images,\r\n                    'previews':oldState.previews,\r\n                    'play':oldState.play,\r\n                    'current':oldState.url,\r\n                    'track_ids':oldState.track_ids,\r\n                    'username':oldState.username,\r\n                    'disabled':disabled_keys,\r\n                    'in_favorites': this.in_favorites,\r\n                    'favorited': favs,\r\n                    'notif': false\r\n                }));\r\n\r\n                console.log(this.state.favorited);\r\n\r\n\r\n\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    console.log(\"error :((\");\r\n                })\r\n\r\n        }   \r\n\r\n\r\n        unfavoriteTrack = (track, index) => {\r\n            let token = cookie.get('access_token');\r\n    \r\n            axios.get(`/api/delete_from_db/${track}/favorites/${token}`)\r\n                    .then(res => {\r\n                        this.added[track] = false;\r\n                        this.state.favorited[track] = false;\r\n                        var disabled_keys = this.state['disabled'];\r\n                        disabled_keys[index] = true;\r\n                        this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':oldState.play,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':disabled_keys,\r\n                        'in_favorites': this.in_favorites,\r\n                        'notif': false\r\n                    }));\r\n    \r\n    \r\n    \r\n                    })\r\n                    .catch(err => {\r\n    \r\n                        console.log(\"error :(\");\r\n                    })\r\n    \r\n            }\r\n\r\n\r\n\r\n\r\n            handleClose = (event, reason) => {\r\n                 this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':false,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'notif': false\r\n                  }));\r\n\r\n\r\n            };\r\n\r\n\r\n\r\n\r\n            render() {\r\n\r\n\r\n\r\n            return(\r\n\r\n        <div style={{backgroundColor: 'white', overflow: 'scroll'}}>\r\n\r\n            {'header' in this.props && this.props.header && <h2 style={{fontWeight: '300', marginTop: '20px', marginBottom: '0px'}}>Related Tracks</h2>}\r\n            {'tableHeader' in this.props && this.props.tableHeader &&\r\n            <div style={{width:'100%'}}>\r\n\r\n                       <h3 style={{float: 'left', marginTop: '2vh', marginLeft: '2vh', fontFamily: 'Montserrat'}}>Track Name\r\n                                         <IconButton onClick={() => {this.refresh_related()}} aria-label=\"refresh\"><AutorenewIcon /></IconButton>\r\n                                                                                            </h3>\r\n\r\n                      <h3 style={{float: 'right', marginRight: '9vh', fontFamily: 'Montserrat'}}>Preview</h3>\r\n\r\n              </div>\r\n              }\r\n            <List>\r\n                {this.state.clicked &&\r\n                    this.state.artists.map((artist, index) =>\r\n                        <ListItem>\r\n                            <a style={{position: 'relative', width: '100%', display: 'inline-flex'}} href={`/track/${this.state.track_ids[index]}`}>\r\n                                <ListItemAvatar>\r\n                                    <Avatar alt=\"Image\" src={this.state.images[index]} />\r\n                                </ListItemAvatar>\r\n                                <ListItemText\r\n                                    primary={this.state.track_names[index]}\r\n                                secondary={this.state.artists[index]}\r\n                                 />\r\n                            </a>\r\n\r\n                            {this.state.favorited[this.state['track_ids'][index]] &&\r\n                             <Button onClick={() => this.unfavoriteTrack(this.state['track_ids'][index], index)} > \r\n                    \r\n                             <StarIcon/>\r\n                             \r\n                             \r\n                             </Button>\r\n                            }\r\n                            {!this.state.favorited[this.state['track_ids'][index]] &&\r\n                             <Button onClick={() => this.favoriteTrack(this.state['track_ids'][index], index)} > \r\n                    \r\n                             <StarBorderIcon/>\r\n                             \r\n                             \r\n                             </Button>\r\n                            }\r\n\r\n                             {this.state['previews'][index] &&\r\n                             <div>\r\n                             <Button onClick={() => this.playTrack(this.state['previews'][index], this.state['play'])}>\r\n                             {(!(this.state['play'] && (this.state['current'] == this.state['previews'][index]))) ? \"Play\" : \"Stop\"}\r\n                             </Button>\r\n                             </div>\r\n                             }\r\n                             {\r\n                             this.state['username']  && !this.state['disabled'][index] &&\r\n                             <Button onClick={() => this.saveTrack(this.state['track_ids'][index], index)}>+</Button>\r\n                               }\r\n\r\n                        </ListItem>\r\n\r\n                    )\r\n                }\r\n            </List>\r\n\r\n                        <>\r\n                        <audio ref={ref => this.player = ref} />\r\n                        </>\r\n\r\n                <Snackbar open={this.state['notif']} autoHideDuration={2000} onClose={this.handleClose}>\r\n                    <Alert onClose={this.handleClose} severity=\"success\">\r\n                      Track Added to library!\r\n                    </Alert>\r\n                  </Snackbar>\r\n\r\n\r\n              </div>\r\n            );\r\n\r\n            }\r\n\r\n}\r\n\r\nexport default RelatedTracks;","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport './tracks.css'\r\nimport { Link } from 'react-router-dom';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport ArtistPage from '../artist/ArtistPage.js'\r\nimport TopTracks from './TopTracks.js';\r\nimport PropTypes from 'prop-types'\r\nimport { Doughnut, Radar, HorizontalBar } from 'react-chartjs-2';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport RelatedTracks from './RelatedTracks.js';\r\n\r\n\r\n\r\n\r\n\r\nclass TrackGraph extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(this.props);\r\n\r\n            this.chartReference = React.createRef();\r\n            this.nextProps = this.props;\r\n            this.state = {value: 'short_term', clicked: false,\r\n                            data: null, artist:this.props.artist};\r\n\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n            let token = cookie.get('access_token');\r\n\r\n//        console.log(nextProps.artist);\r\n//        console.log(this.props.artist);\r\n\r\n        if(this.props != nextProps) {\r\n            this.nextProps = nextProps\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        console.log(this.nextProps.artist.artist)\r\n        axios.get(`/api/track/${this.nextProps.artist.uri}/${token}`)\r\n        .then(res => {\r\n            fetch = res.data;\r\n            console.log(fetch);\r\n            this.setState({\r\n                'clicked': true,\r\n                'dataset': {\r\n                    data: fetch.scores,\r\n                    labels: fetch.labels,\r\n                    backgroundColor: fetch.colors\r\n                },\r\n                'data': [{\r\n                    labels: fetch.labels,\r\n                    datasets: [{\r\n                        'data': fetch.scores,\r\n                        'labels': fetch.labels,\r\n                        'backgroundColor': fetch.colors\r\n                    }]\r\n                }]\r\n\r\n            });\r\n            this.render();\r\n\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n            render() {\r\n            return(\r\n\r\n        <div>\r\n\r\n\r\n\r\n\r\n        <div style={{backgroundColor: 'white'}}>\r\n\r\n        <Card>\r\n            {this.state.clicked &&\r\n            <Card class=\"track-chart-container\">\r\n\r\n                    <HorizontalBar ref={this.chartReference}\r\n                                    data={this.state.data[0]} options={{\r\n                                        legend: {\r\n                                            display: false\r\n                                        },\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: 'Feature Scores',\r\n                                            fontFamily: 'Montserrat',\r\n                                            fontSize: '18'\r\n                                        }\r\n\r\n\r\n                                    }}  />\r\n            </Card>\r\n            }\r\n\r\n\r\n\r\n             </Card>\r\n              </div>\r\n             </div>\r\n            );\r\n\r\n            }\r\n\r\n}\r\n\r\nexport default TrackGraph;","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport FetchTracks from './FetchTracks.js';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport './tracks.css'\r\nimport {Distribution, Box, Text} from 'grommet';\r\nimport TrackGraph from './TrackGraph.js';\r\nimport RelatedTracks from './RelatedTracks.js';\r\nimport {\r\n  BrowserView,\r\n  MobileView,\r\n  isBrowser,\r\n  isMobile\r\n} from \"react-device-detect\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\n\r\n\r\nclass TopTracks extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {value: 'short_term', clicked: false};\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.onClick = this.props.onClick;\r\n        this.showGraph = false;\r\n        this.graphTrack =  null;\r\n    }\r\n    handleChange = (artist) => {\r\n        if(this.state.artist != artist) {\r\n            this.setState(oldState => ({\r\n                value: oldState.value,\r\n                clicked: true,\r\n                artist: artist\r\n            }), () => console.log(this.state.artist.artist));\r\n\r\n        }\r\n\r\n\r\n\r\n      }\r\n\r\n\r\n    handleSubmit = (event, new_value) => {\r\n        this.setState(oldState => ({\r\n                value: new_value,\r\n                clicked: oldState.clicked,\r\n                artist: oldState.artist\r\n            }));\r\n\r\n    }\r\n\r\n\r\n\r\n     async componentDidMount() {\r\n      }\r\n\r\n    render(){\r\n\r\n        return(\r\n\r\n            <div style={{marginLeft: '30px'}} class=\"browser-container\">\r\n            <BrowserView>\r\n                <form>\r\n                    <label>\r\n                    <Tabs\r\n                        value={this.state[\"value\"]}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        onChange={this.handleSubmit}\r\n                        aria-label=\"disabled tabs example\"\r\n                      >\r\n                            <Tab className=\"track-tab\" value=\"short_term\" label=\"Month\" />\r\n                            <Tab className=\"track-tab\" value=\"medium_term\" label=\"6 Months\" />\r\n                            <Tab className=\"track-tab\" value=\"long_term\" label=\"All Time\" />\r\n                      </Tabs>\r\n                </label>\r\n                </form>\r\n\r\n                {this.state['clicked'] && this.state['value'] && <Distribution style={{maxHeight:'100vh'}} className=\"dist-box-tracks\"\r\n              values={[\r\n                { value: 50, className:\"top-tracks\", show: true, data: <FetchTracks clicked={this.state['clicked']} {...this.state} handleChange={this.handleChange} data={this.state['value']} /> },\r\n                { value: 25, className:\"related-tracks\", show: (this.state.clicked && (this.state.artist)), data: <RelatedTracks {...this.state} header={true} artist={this.state.artist} /> },\r\n                { value: 25, className:\"track-graph\", show: (this.state.clicked && (this.state.artist)), data: <TrackGraph {...this.state} artist={this.state.artist} /> }\r\n              ]}\r\n            >\r\n              {value =>\r\n                <Box className={value.className} pad=\"small\" fill>\r\n                  {value.show && value.data}\r\n                </Box>\r\n              }\r\n            </Distribution>\r\n            }\r\n            {!this.state['clicked'] && this.state['value'] && <Distribution style={{maxHeight:'100vh'}} className=\"dist-box-tracks\"\r\n              values={[\r\n                { value: 100, className:\"top-tracks\", show: true, data: <FetchTracks clicked={this.state['clicked']} handleChange={this.handleChange} {...this.state} data={this.state['value']}  /> }\r\n              ]}\r\n            >\r\n              {value =>\r\n                <Box className={value.className} pad=\"small\" fill>\r\n                  {value.show && value.data}\r\n                </Box>\r\n              }\r\n            </Distribution>\r\n            }\r\n\r\n\r\n            </BrowserView>\r\n\r\n            <MobileView>\r\n            <form>\r\n                    <label>\r\n                    <Tabs\r\n                        value={this.state[\"value\"]}\r\n                        indicatorColor=\"primary\"\r\n                        textColor=\"primary\"\r\n                        onChange={this.handleSubmit}\r\n                        aria-label=\"disabled tabs example\"\r\n                      >\r\n                            <Tab className=\"track-tab\" value=\"short_term\" label=\"Week\" />\r\n                            <Tab className=\"track-tab\" value=\"medium_term\" label=\"Month\" />\r\n                            <Tab className=\"track-tab\" value=\"long_term\" label=\"All Time\" />\r\n                      </Tabs>\r\n                </label>\r\n                </form>\r\n             <FetchTracks handleChange={this.handleChange} {...this.state} data={this.state['value']}  />\r\n            </MobileView>\r\n\r\n            </div>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default TopTracks;","import React, {useEffect, useState} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport SyncIcon from '@material-ui/icons/Sync';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\r\nimport './playlistbuttons.css';\r\n\r\nclass PlaylistButtons extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.nextProps = this.props;\r\n        this.state = {hasPlaylist: false, playlistId:null, playlistUrl: null};\r\n\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n            let token = cookie.get('access_token');\r\n\r\n        if(this.props != nextProps) {\r\n            this.nextProps = nextProps\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.userHasPlaylist();\r\n        this.getUserPlaylist();\r\n    }\r\n\r\n    userHasPlaylist = () => {\r\n        let token = cookie.get('access_token');\r\n            axios.get(`/api/user_has_playlist/${token}`)\r\n            .then(res => {\r\n                fetch = res.data;\r\n                console.log(res.data);\r\n                this.setState({\r\n                    'hasPlaylist': fetch.hasPlaylist,\r\n                });\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    } \r\n    getUserPlaylist = () => {\r\n        let token = cookie.get('access_token');\r\n            axios.get(`/api/get_favorites_playlist_url/${token}`)\r\n            .then(res => {\r\n                fetch = res.data;\r\n                console.log(res.data);\r\n                this.setState({\r\n                    'playlistUrl':fetch.url\r\n                });\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    } \r\n\r\n    deleteFavoritesPlaylist = () => {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/delete_favorites_playlist/${token}`)\r\n            .then(res => {\r\n                this.setState({\r\n                    hasPlaylist: false\r\n                });\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    createFavoritesPlaylist = () => {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/create_playlist/${token}`)\r\n            .then(res => {\r\n                this.setState({\r\n                    'hasPlaylist': true,\r\n                    'playlistId': res.data.playlist_id,\r\n                    'playlistUrl': this.getUserPlaylist()\r\n                });\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    clearFavorites = () => {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/clear_favorites/${token}`)\r\n            .then(res => {\r\n                this.setState({\r\n                    \r\n                });\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    clearFavsHelper = () => {\r\n        this.clearFavorites();\r\n        window.location.reload();\r\n    }\r\n    render(){\r\n        return(\r\n            <div>\r\n            <div id='black-buttons' align=\"right\" style={{marginRight: '20px'}}>\r\n            {!this.state.hasPlaylist && \r\n            <Button onClick={() => this.createFavoritesPlaylist()} variant=\"contained\" className=\"black-buttons\"style={{color: \"#DFE0E3\", backgroundColor: \"#313331\"}} > <SyncIcon color=\"white\"/>Sync to Spotify Playlist</Button>}\r\n\r\n            {this.state.hasPlaylist &&   <Button style={{color: \"#DFE0E3\", backgroundColor: \"#313331\"}} onClick={()=> window.open(this.state.playlistUrl, \"_blank\")} variant=\"contained\">View Playlist</Button>}\r\n            {this.state.hasPlaylist && <Button onClick={() => this.deleteFavoritesPlaylist()} variant=\"contained\" style={{color: \"#DFE0E3\", backgroundColor: \"red\"}}> <DeleteIcon color=\"white\"/>Delete Spotify Playlist</Button>}</div>\r\n            <Button style={{color: \"#DFE0E3\", backgroundColor: \"#313331\"}} variant=\"contained\" onClick={() => this.clearFavsHelper()} className=\"black-buttons\"> Clear Favorites</Button>\r\n            \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PlaylistButtons;","import React, {useEffect, useState} from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { List, Image } from 'semantic-ui-react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport StarIcon from '@material-ui/icons/Star';\r\nimport StarBorderIcon from '@material-ui/icons/StarBorder';\r\nimport SyncIcon from '@material-ui/icons/Sync';\r\nimport PlaylistButtons from './PlaylistButtons';\r\n\r\nclass Alert extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.props = props\r\n    }\r\n\r\n    render() {\r\n        return <MuiAlert elevation={6} variant=\"filled\" {...this.props} />;\r\n\r\n    }\r\n }\r\n\r\n\r\n\r\nclass FavTracks extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(\"mee\");\r\n            this.added = {};\r\n            this.chartReference = React.createRef();\r\n            this.nextProps = this.props;\r\n            this.state = {value: 'short_term', clicked: false,\r\n                            data: null, artists: [], previews: [], images: [], play: false, notif: false, favorited: {}, disabled: []};\r\n\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n            let token = cookie.get('access_token');\r\n\r\n        if(this.props != nextProps) {\r\n            this.nextProps = nextProps\r\n            this.componentDidMount();\r\n\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    async componentDidMount() {\r\n    }\r\n\r\n     playTrack = (url, play) => {\r\n        if(url) {\r\n            if(url != this.state['current'] && this.state['current']) {\r\n                this.player.pause();\r\n                this.player.src = url;\r\n                this.setState(oldState => ({\r\n                    'clicked':oldState.clicked,\r\n                    'artists':oldState.artists,\r\n                    'track_names':oldState.track_names,\r\n                    'images':oldState.images,\r\n                    'previews':oldState.previews,\r\n                    'play':true,\r\n                    'current':url,\r\n                    'track_ids':oldState.track_ids,\r\n                    'username':oldState.username,\r\n                    'disabled':oldState.disabled,\r\n                    'notif': false,\r\n                    'in_favorites': oldState.in_favorites,\r\n\r\n                }));\r\n                this.player.play();\r\n            }\r\n            else {\r\n              this.player.src = url;\r\n              if(!play) {\r\n                  this.player.play()\r\n                   this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':true,\r\n                        'current':url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'notif': false\r\n                    }));\r\n\r\n                }\r\n                else {\r\n                    this.player.pause();\r\n                    this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':false,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'notif':false\r\n                    }));\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n        saveTrack = (track, index) => {\r\n            let token = cookie.get('access_token');\r\n\r\n            axios.get(`/api/track/save/${track}/${this.state['username']}/${token}`)\r\n                    .then(res => {\r\n                        this.added[track] = true;\r\n                        var disabled_keys = this.state['disabled'];\r\n                        disabled_keys[index] = true;\r\n                        this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':oldState.play,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':disabled_keys,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'favorited': this.state.favorited,\r\n                        'notif': true\r\n                    }));\r\n\r\n\r\n\r\n                    })\r\n                    .catch(err => {\r\n\r\n                        console.log(\"error :(\");\r\n                    })\r\n\r\n    }\r\n\r\n    favoriteTrack = (track, index) => {\r\n        let token = cookie.get('access_token');\r\n\r\n        axios.get(`/api/save_to_db/${track}/${token}`)\r\n                .then(res => {\r\n                    this.added[track] = false;\r\n                    let favs = this.state['favorited'];\r\n                    favs[track] = true;\r\n                    var disabled_keys = this.state['disabled'];\r\n                    disabled_keys[index] = true;\r\n                    this.setState(oldState => ({\r\n                    'clicked':oldState.clicked,\r\n                    'artists':oldState.artists,\r\n                    'track_names':oldState.track_names,\r\n                    'images':oldState.images,\r\n                    'previews':oldState.previews,\r\n                    'play':oldState.play,\r\n                    'current':oldState.url,\r\n                    'track_ids':oldState.track_ids,\r\n                    'username':oldState.username,\r\n                    'disabled':disabled_keys,\r\n                    'in_favorites': this.in_favorites,\r\n                    'favorited': favs,\r\n                    'notif': false\r\n                }));\r\n\r\n                console.log(this.state.favorited);\r\n\r\n\r\n\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    console.log(\"error :((\");\r\n                })\r\n\r\n        }   \r\n\r\n        componentDidMount() {\r\n            this.loadTracks();\r\n        }\r\n\r\n        loadTracks = () =>{\r\n            let token = cookie.get('access_token');\r\n            axios.get(`/api/fetch_fav_tracks/${token}`)\r\n            .then(res => {\r\n                fetch = res.data;\r\n                console.log(res.data);\r\n                this.state.favorited = new Array(fetch.artists.length).fill(true);\r\n                this.setState({\r\n                    'clicked':true,\r\n                    'artists':fetch.artists,\r\n                    'track_names':fetch.song_names,\r\n                    'images':fetch.images,\r\n                    'previews':fetch.previews,\r\n                    'current':null,\r\n                    'track_ids':fetch.ids,\r\n                    'username':fetch.username,\r\n                    'disabled':new Array(fetch.previews.length).fill(false),\r\n                    'notif': false,\r\n                    'in_favorites': fetch.in_favorites,\r\n                });\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('error :(')\r\n            console.log(err)\r\n        })\r\n        }\r\n\r\n        handleDelete = (trackId, trackName, artistName, imageId, previewId) => {\r\n            const tracks = this.state.track_ids.filter(track => track !== trackId);\r\n            const names =  this.state.track_names.filter(track => track !== trackName);\r\n            const artists =  this.state.artists.filter(name => name !== artistName);\r\n            const images = this.state.images.filter(image => image !== imageId);\r\n            const previews = this.state.previews.filter(preview => preview !== previewId);\r\n\r\n            this.setState({ track_ids: tracks,\r\n                            track_names: names,\r\n                            artists: artists });\r\n        };\r\n\r\n        unfavoriteTrack = (track, index) => {\r\n            let token = cookie.get('access_token');\r\n    \r\n            axios.get(`/api/delete_from_db/${track}/favorites/${token}`)\r\n                    .then(res => {\r\n                        this.added[track] = false;\r\n                        this.state.favorited[track] = false;\r\n                        this.handleDelete(this.state.track_ids[index], this.state.track_names[index], this.state.artists[index], this.state.images[index], this.state.previews[index]);\r\n                        var disabled_keys = this.state['disabled'];\r\n                        disabled_keys[index] = true;\r\n                        //var new_artists = oldState.artists.splice((index-1), 1);\r\n                        \r\n                        this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':oldState.play,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':disabled_keys,\r\n                        'in_favorites': this.in_favorites,\r\n                        'notif': false\r\n                    }));\r\n    \r\n    \r\n    \r\n                    })\r\n                    .catch(err => {\r\n    \r\n                        console.log(\"error :(\");\r\n                    })\r\n    \r\n            }\r\n\r\n\r\n\r\n\r\n            handleClose = (event, reason) => {\r\n                 this.setState(oldState => ({\r\n                        'clicked':oldState.clicked,\r\n                        'artists':oldState.artists,\r\n                        'track_names':oldState.track_names,\r\n                        'images':oldState.images,\r\n                        'previews':oldState.previews,\r\n                        'play':false,\r\n                        'current':oldState.url,\r\n                        'track_ids':oldState.track_ids,\r\n                        'username':oldState.username,\r\n                        'disabled':oldState.disabled,\r\n                        'in_favorites': oldState.in_favorites,\r\n                        'notif': false\r\n                  }));\r\n\r\n\r\n            };\r\n\r\n\r\n\r\n\r\n            render() {\r\n\r\n                \r\n\r\n            return(\r\n\r\n        <div style={{marginLeft: '60px', backgroundColor: 'white', overflow: 'scroll'}}>\r\n\r\n            <h2 style={{fontSize: '35px', fontWeight: '80', marginTop: '20px', marginBottom: '0px'}}>Favorite Tracks</h2>\r\n            <PlaylistButtons/>\r\n            <List>\r\n                {this.state.clicked &&\r\n                    this.state.artists.map((artist, index) =>\r\n                        <ListItem>\r\n                            <ListItemAvatar>\r\n                                <Avatar alt=\"Image\" src={this.state.images[index]} />\r\n                            </ListItemAvatar>\r\n                            <ListItemText\r\n                                primary={this.state.track_names[index]}\r\n                            secondary={this.state.artists[index]}\r\n                             />\r\n\r\n                            {!this.state.favorited[this.state['track_ids'][index]] &&\r\n                             <Button onClick={() => this.unfavoriteTrack(this.state['track_ids'][index], index)} > \r\n                    \r\n                             <StarIcon/>\r\n                             \r\n                             \r\n                             </Button>\r\n                            }\r\n                            {this.state.favorited[this.state['track_ids'][index]] &&\r\n                             <Button onClick={() => this.favoriteTrack(this.state['track_ids'][index], index)} > \r\n                    \r\n                             <StarBorderIcon/>\r\n                             \r\n                             \r\n                             </Button>\r\n                            }\r\n\r\n                             {this.state['previews'][index] &&\r\n                             <div>\r\n                             <Button onClick={() => this.playTrack(this.state['previews'][index], this.state['play'])}>\r\n                             {(!(this.state['play'] && (this.state['current'] == this.state['previews'][index]))) ? \"Play\" : \"Stop\"}\r\n                             </Button>\r\n                             </div>\r\n                             }\r\n                             {\r\n                             this.state['username']  && !this.state['disabled'][index] &&\r\n                             <Button onClick={() => this.saveTrack(this.state['track_ids'][index], index)}>+</Button>\r\n                               }\r\n\r\n                        </ListItem>\r\n\r\n                    )\r\n                }\r\n            </List>\r\n\r\n                        <>\r\n                        <audio ref={ref => this.player = ref} />\r\n                        </>\r\n\r\n                <Snackbar open={this.state['notif']} autoHideDuration={2000} onClose={this.handleClose}>\r\n                    <Alert onClose={this.handleClose} severity=\"success\">\r\n                      Track Added to library!\r\n                    </Alert>\r\n                  </Snackbar>\r\n\r\n\r\n              </div>\r\n            );\r\n\r\n            }\r\n\r\n}\r\n\r\nexport default FavTracks;","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport { Sidebar } from 'semantic-ui-react';\r\nimport FavTracks from './FavTracks';\r\nimport {Distribution, Box, Text} from 'grommet';\r\n\r\n\r\nclass UserFavorites extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <Distribution style={{maxHeight:'100vh'}} className=\"dist-box-albums\"\r\n            values={[\r\n              { value: 100, className:\"fav-tracks\", show: true, data: <FavTracks {...this.state}/> },\r\n            ]} >\r\n            {value => (\r\n          <Box className={value.className} pad=\"small\" fill>\r\n            {value.show && value.data}\r\n          </Box>\r\n        )}\r\n      </Distribution>\r\n        );\r\n    }\r\n}\r\n\r\nexport default UserFavorites;\r\n","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { useParams } from \"react-router-dom\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {BrowserView, MobileView} from 'react-device-detect';\r\nimport Carousel from 'react-material-ui-carousel'\r\nimport 'react-multi-carousel/lib/styles.css';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport Slider from \"react-slick\";\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Doughnut, Radar } from 'react-chartjs-2';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ItemsCarousel from 'react-items-carousel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport { Grommet, Distribution, Box, Text, grommet } from 'grommet';\r\nimport ArtistPage from '../top_artists/ArtistPage.js';\r\nimport RelatedTracks from '../top_tracks/RelatedTracks.js';\r\nimport '../top_artists/artists.css';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core';\r\nimport AudioPlayer from 'material-ui-audio-player';\r\nimport './trackPage.css';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport ScrollIntoView from 'react-scroll-into-view';\r\n\r\nexport function AlbumList(data) {\r\n\r\n    console.log(data);\r\n    let track_id = data.track_id;\r\n//    const classes = theme => ({\r\n//      tableRow: {\r\n//        \"&$selected, &$selected:hover\": {\r\n//          backgroundColor: \"purple\"\r\n//        }\r\n//      },\r\n//      selected: {}\r\n//    });\r\n    let selected_id = React.createRef();\r\n     useEffect(() => {\r\n        selected_id.current.scrollIntoView();\r\n    })\r\n\r\n\r\n    return (\r\n        <div className=\"albumList\" style={{height: '81vh'}}>\r\n             <TableContainer style={{background: 'white', height: '100%'}} >\r\n                <Table>\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell size=\"medium\" className=\"album-table-header\" classes=\"table-header\" align=\"left\">Track Name</TableCell>\r\n                        <TableCell size=\"medium\" className=\"album-table-header\" classes=\"table-header\" align=\"left\">Duration</TableCell>\r\n\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    { data.album && data.album.map((track,index) =>\r\n                    <TableRow ref={selected_id} id={track['id']} selected={(track['id'] == track_id)}  key={track['name']}>\r\n\r\n                        <TableCell className=\"table-results\" component=\"th\" scope=\"row\">\r\n                            <h6 className=\"track-name\">{track.name}</h6>\r\n                          </TableCell>\r\n                          <TableCell className=\"table-results\" align=\"center\">{Math.trunc(track['duration_ms']/60000) + \":\" +\r\n                                    ((Math.trunc((track['duration_ms']/60000-Math.trunc(track['duration_ms']/60000))*60) < 10) ? \"0\"+Math.trunc((track['duration_ms']/60000-Math.trunc(track['duration_ms']/60000))*60) : Math.trunc((track['duration_ms']/60000-Math.trunc(track['duration_ms']/60000))*60)) }\r\n                          </TableCell>\r\n                     </TableRow>\r\n                    )}\r\n                    </Table>\r\n             </TableContainer>\r\n\r\n\r\n        </div>\r\n    );\r\n\r\n\r\n}\r\nexport function ArtistChart(data) {\r\n\r\n    console.log(data)\r\n    let chart = data.chart;\r\n    let chartReference = React.createRef();\r\n    var genres = [];\r\n    var i;\r\n    for (i in data.artists) {\r\n        console.log(data.artists[i])\r\n        genres = genres.concat(data.artists[i]['genres'])\r\n    }\r\n    var count = {};\r\n    genres.forEach(number => count[number] = (count[number] || 0) +1);\r\n    let frequencies = Object.values(count)\r\n    let datasets = [{\r\n        data: frequencies,\r\n        labels: genres,\r\n        backgroundColor: chart == \"doughnut\" ? ['#f1a5ba', '#f5b565', '#fbd981', '#93dcdc', '#6cb8ee'] : 'rgba(108, 184, 238,0.6)'\r\n    }];\r\n    let chartData = [{\r\n        labels: genres,\r\n        datasets: datasets\r\n    }]\r\n    let mobile = false; //CHANGE THIS LATER\r\n\r\n    return (\r\n        <div>\r\n            <Doughnut style={{height: '25vh'}} ref={chartReference}\r\n                                    data={chartData[0]} options={{\r\n                                        title: {\r\n                                            display: true,\r\n                                            text: 'Artists Top Genres',\r\n                                            fontFamily: 'Montserrat',\r\n                                            fontSize: '18'\r\n                                        },\r\n                                        legend: {\r\n                                            display:  mobile ? false : true,\r\n                                        },\r\n                                         responsive:  mobile ? false : true,\r\n\r\n                                    }} />\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n    );\r\n\r\n}\r\n\r\nexport function TabbedTracks(data) {\r\n\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = (event, new_value) => {\r\n        event.preventDefault()\r\n        setValue(new_value)\r\n        console.log(new_value);\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <AppBar classes=\"track-navbar\" style={{position: 'relative', background: 'white', zIndex: '3'}} className=\"track-navbar\">\r\n                <Tabs value={value} onChange={handleChange} indicatorColor=\"primary\" textColor=\"primary\" aria-label=\"simple tabs example\">\r\n                  <Tab value={0} label=\"Album Tracks\" />\r\n                  <Tab value={1} label=\"Related Tracks\" />\r\n                </Tabs>\r\n              </AppBar>\r\n            {value == 0 &&\r\n                <AlbumList style={{height: '81vh'}}  {...data} album={data['album_track']} />\r\n\r\n            }\r\n            {value == 1 &&\r\n                <RelatedTracks style={{background: 'white'}} {...data} tableHeader={true} header={false} artist={data.artists[0]} />\r\n\r\n            }\r\n\r\n\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nexport function TrackPlayback(data) {\r\n\r\n//album_track: (21) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]\r\n//artist: {external_urls: {…}, href: \"https://api.spotify.com/v1/artists/4MCBfE4596Uoi2O4DtmEMz\", id: \"4MCBfE4596Uoi2O4DtmEMz\", name: \"Juice WRLD\", type: \"artist\", …}\r\n//track_id: \"0jo6Nd4iJU0UFHqS0Xd4l4\"\r\n//track_info:\r\n//album: {album_type: \"album\", artists: Array(1), available_markets: Array(92), external_urls: {…}, href: \"https://api.spotify.com/v1/albums/1R6vbGGXSEZZmTGn7ewwRL\", …}\r\n//artists: [{…}]\r\n//available_markets: (92) [\"AD\", \"AE\", \"AL\", \"AR\", \"AT\", \"AU\", \"BA\", \"BE\", \"BG\", \"BH\", \"BO\", \"BR\", \"BY\", \"CA\", \"CH\", \"CL\", \"CO\", \"CR\", \"CY\", \"CZ\", \"DE\", \"DK\", \"DO\", \"DZ\", \"EC\", \"EE\", \"EG\", \"ES\", \"FI\", \"FR\", \"GB\", \"GR\", \"GT\", \"HK\", \"HN\", \"HR\", \"HU\", \"ID\", \"IE\", \"IL\", \"IN\", \"IS\", \"IT\", \"JO\", \"JP\", \"KW\", \"KZ\", \"LB\", \"LI\", \"LT\", \"LU\", \"LV\", \"MA\", \"MC\", \"MD\", \"ME\", \"MK\", \"MT\", \"MX\", \"MY\", \"NI\", \"NL\", \"NO\", \"NZ\", \"OM\", \"PA\", \"PE\", \"PH\", \"PL\", \"PS\", \"PT\", \"PY\", \"QA\", \"RO\", \"RS\", \"RU\", \"SA\", \"SE\", \"SG\", \"SI\", \"SK\", \"SV\", \"TH\", \"TN\", \"TR\", \"TW\", \"UA\", \"US\", \"UY\", \"VN\", \"XK\", \"ZA\"]\r\n//disc_number: 1\r\n//duration_ms: 200628\r\n//explicit: true\r\n//external_ids: {isrc: \"USUG12001902\"}\r\n//external_urls: {spotify: \"https://open.spotify.com/track/0jo6Nd4iJU0UFHqS0Xd4l4\"}\r\n//href: \"https://api.spotify.com/v1/tracks/0jo6Nd4iJU0UFHqS0Xd4l4\"\r\n//id: \"0jo6Nd4iJU0UFHqS0Xd4l4\"\r\n//is_local: false\r\n//name: \"Fighting Demons\"\r\n//popularity: 82\r\n//preview_url: \"https://p.scdn.co/mp3-preview/6deb0bd1f2e187b43f79016588695e93d326b0d1?cid=eb173f7af2f14a189be9011019c90df2\"\r\n//track_number: 13\r\n//type: \"track\"\r\n//uri: \"spotify:track:0jo6Nd4iJU0UFHqS0\r\n\r\n    const muiTheme = createMuiTheme({});\r\n\r\n    return (\r\n        <div className=\"player-container\" style={{position: 'relative', height: 'inherit'}}>\r\n            <div className=\"playback-img-container\">\r\n                <img className=\"playback-img\" src={data.track_info.album.images[0].url} alt=\"\"/>\r\n            </div>\r\n            <div style={{position: 'absolute', bottom: '20px'}} className=\"audio-controls\">\r\n                <ThemeProvider style={{position: 'absolute', bottom: '10px'}} className=\"audio-controls\">\r\n                  <AudioPlayer src={data.track_info['preview_url']} />\r\n                </ThemeProvider>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n\r\n}\r\n\r\n\r\nclass TrackPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(props);\r\n        this.state = {'track_id': props.id}\r\n//        <ArtistPage handleChange={this.handleChange} {...this.state} />\r\n\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        console.log(this.state['track_id'])\r\n        axios.get(`/api/trackPage/${this.state['track_id']}/${token}/`)\r\n        .then(res => {\r\n            console.log(res.data);\r\n            this.setState(oldState => ({\r\n                'track_id': oldState.track_id,\r\n                'track_info':res.data.track,\r\n                'artists':res.data.artists,\r\n                'album_track': res.data.album_tracks.items,\r\n                'album':res.data.album\r\n            }));\r\n            console.log(res.data.track);\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('yo')\r\n            console.log(err)\r\n        })\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={{ overflow: 'hidden', marginTop: `3vh`, marginLeft: '84px', width: '100%'}}>\r\n                <BrowserView>\r\n                    {'artists' in this.state &&\r\n                        <Grid style={{width: 'calc(97% - 84px)'}} container className=\"grid-container\" alignItems=\"center\" justify=\"center\" spacing={0}>\r\n                            <Grid item xs={12}>\r\n                                <TabbedTracks {...this.state} album={this.state['album_track']} artist={this.state.artists[0]} />\r\n                            </Grid>\r\n                        </Grid>\r\n\r\n                    }\r\n                </BrowserView>\r\n\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default TrackPage;\r\n//<Grommet style={{overflow: 'hidden', width: '100%',backgroundColor: \"#EBEBEB\"}} full>\r\n//                        {'artists' in this.state &&\r\n//                        <Distribution style={{overflow: 'hidden'}} margin=\"xsmall\" gap=\"none\"\r\n//                          fill\r\n//                          values={[\r\n//                            { value: 25, color: \"white\", overflow: false, title: \"Artist Image\", data: <TrackPlayback {...this.state} /> },\r\n//                            { value: 25, color: \"white\", overflow: false, title: \"Artist Image\", data: <ArtistChart chart=\"doughnut\" {...this.state}  /> },\r\n//                            { value: 25, color: \"white\", overflow: true, title: \"Track Preview\", data: <RelatedTracks {...this.state} artist={this.state.artists[0]} /> },\r\n//                            { value: 25, color: \"white\", overflow: true, title: \"Album Tracks\", data: <AlbumList album={this.state['album_track']} /> }\r\n //]}\r\n//                        >\r\n//                          {value => (\r\n//\r\n//                                <Card width=\"100%\" height=\"100%\" style={{backgroundColor: \"white\", overflow: value.overflow ? 'scroll': 'hidden'}} className=\"userinfo-card\">\r\n//                                    {value.data}\r\n//                                </Card>\r\n//\r\n//                          )}\r\n//                        </Distribution>}\r\n//                      </Grommet>\r\n//<Grommet style={{overflow: 'hidden', width: '100%',backgroundColor: \"#EBEBEB\"}} full>\r\n//                        {'artists' in this.state &&\r\n//                        <Distribution style={{overflow: 'hidden'}} margin=\"xsmall\" gap=\"none\"\r\n//                          fill\r\n//                          values={[\r\n//                            { value: 25, color: \"white\", flexBasis: '40%', overflow: false, title: \"Artist Image\", data: <TrackPlayback {...this.state} /> },\r\n//                            { value: 25, color: \"white\", flexBasis: '40%', overflow: false, title: \"Artist Image\", data: <ArtistChart chart=\"doughnut\" {...this.state}  /> },\r\n//                            { value: 50, color: \"white\", flexBasis: '60%', overflow: true, title: \"Track Preview\", data: <TabbedTracks {...this.state} album={this.state['album_track']} artist={this.state.artists[0]} /> },\r\n//                       ]} >\r\n//                          {value => (\r\n//\r\n//                                <Card width=\"100%\" height=\"100%\" style={{backgroundColor: \"white\", overflow: value.overflow ? 'scroll': 'hidden'}} className=\"userinfo-card\">\r\n//                                    {value.data}\r\n//                                </Card>\r\n//\r\n//                          )}\r\n//                        </Distribution>}\r\n//                      </Grommet>\r\n","import React, { useState, useEffect, Component, setState } from 'react';\r\nimport cookie from 'js-cookie';\r\nimport axios from 'axios';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport { useParams } from \"react-router-dom\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {BrowserView, MobileView} from 'react-device-detect';\r\nimport Carousel from 'react-material-ui-carousel'\r\nimport 'react-multi-carousel/lib/styles.css';\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Doughnut, Radar } from 'react-chartjs-2';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport ItemsCarousel from 'react-items-carousel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport { Grommet, Distribution, Box, Text, grommet } from 'grommet';\r\nimport ArtistPage from '../top_artists/ArtistPage.js';\r\nimport RelatedTracks from '../top_tracks/RelatedTracks.js';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core';\r\nimport AudioPlayer from 'material-ui-audio-player';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport ScrollIntoView from 'react-scroll-into-view';\r\nimport GenreChart from '../dashboard/GenreChart.js';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport List from '@material-ui/core/List';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\n\r\nexport function ScrollGenres(data) {\r\n\r\n    const all_genres = ['acoustic', 'alt-rock', 'alternative',\r\n                'ambient', 'anime', 'bluegrass', 'blues',\r\n                'chill', 'classical', 'club',\r\n                'country', 'dance',\r\n                'deep-house','disco',\r\n                'drum-and-bass', 'edm', 'electro',\r\n                'electronic', 'emo', 'folk',\r\n                'goth','hard-rock',\r\n                'heavy-metal', 'hip-hop', 'holidays',\r\n                'house', 'indie',\r\n                'jazz',\r\n                'k-pop', 'kids',\r\n                'metal',\r\n                'new-age','opera', 'party',\r\n                'piano', 'pop',\r\n                'punk',\r\n                'r-n-b', 'rainy-day', 'reggae',\r\n                'rock-n-roll',\r\n                'sad', 'salsa',\r\n                'sleep', 'soul',\r\n                'techno',\r\n                'work-out', 'world-music'].sort();\r\n    const [selectedGenre, setSelectedGenre] = React.useState(\"\")\r\n\r\n\r\n    const getRecommended = (event) => {\r\n\r\n        setSelectedGenre(event.target.textContent);\r\n        data.getTracks(event.target.textContent);\r\n\r\n    }\r\n\r\n    return (<div>\r\n        <h2 style={{fontFamily: 'Montserrat'}}>All Genres</h2>\r\n        <List>\r\n        {all_genres.map((genre, index) =>\r\n            <ListItem selected={selectedGenre == genre} value={genre} style={{fontFamily: 'Montserrat'}} divider={true} onClick={getRecommended}>\r\n                <ListItemText value={genre} primary={genre} onClick={getRecommended} />\r\n            </ListItem>\r\n\r\n        )}\r\n        </List>\r\n\r\n    </div>)\r\n\r\n}\r\n\r\nexport function RecommendedTracksPanel(data) {\r\n\r\n        console.log(data.recommended)\r\n//        const genres_element = (<TableCell className=\"table-results\" align=\"center\">{data['artist_info'][index]['genres'].join(\", \")}</TableCell>);\r\n\r\n        return (\r\n        <div>\r\n\r\n                <div>\r\n                <TableContainer style={{marginLeft: '10px'}} component={Paper}>\r\n                  <Table aria-label=\"simple table\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"rec-table-header\" align=\"left\">Track Name</TableCell>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"rec-table-header\" align=\"left\">Artist</TableCell>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"rec-table-header\" align=\"right\">Duration</TableCell>\r\n                        <TableCell size=\"medium\" className=\"table-header\" classes=\"rec-table-header\" align=\"right\">Popularity</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n\r\n                    {'recommended' in data && data.recommended && data['recommended'].map((track,index) =>\r\n            <TableRow key={track['name']} component=\"a\" href={`/track/${track['id']}`}>\r\n              <TableCell className=\"table-results\" component=\"th\" scope=\"row\">\r\n                <div className=\"avatar-head\">\r\n                    <Avatar className=\"table-avatar\" src={track['album']['images'].length > 0 ? track['album']['images'][0]['url'] : \"\"} />&emsp; <h6 className=\"track-name\">{track.name}</h6>\r\n                </div>\r\n              </TableCell>\r\n              <TableCell className=\"table-results\" align=\"left\">{track['artists'][0]['name']}</TableCell>\r\n              <TableCell className=\"table-results\" align=\"right\">{Math.trunc(track['duration_ms']/60000) + \":\" +\r\n                        Math.trunc((track['duration_ms']/60000-Math.trunc(track['duration_ms']/60000))*60)}</TableCell>\r\n              <TableCell className=\"table-results\" align=\"right\">{track['popularity']}</TableCell>\r\n            </TableRow>\r\n\r\n                     )}\r\n\r\n\r\n               </Table>\r\n               </TableContainer>\r\n            </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        </div>\r\n\r\n        );\r\n\r\n}\r\n\r\n\r\n\r\nclass RecommendedPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        console.log(props);\r\n        this.state = {}\r\n        this.getRecommendedTracks = this.getRecommendedTracks.bind(this)\r\n    }\r\n\r\n    async componentDidMount() {\r\n        let token = cookie.get('access_token');\r\n        axios.get(`/api/user_info/${token}/`)\r\n        .then(res => {\r\n            console.log(res.data);\r\n            this.setState({ ...res.data[0], genres: [\r\n                  {\r\n                    value: 0,\r\n                    label: res.data[0].long_term_genres[0],\r\n                    name: 0\r\n                  },\r\n                  {\r\n                    value: 25,\r\n                    label: res.data[0].long_term_genres[1],\r\n                    name: 1\r\n                  },\r\n                  {\r\n                    value: 50,\r\n                    label: res.data[0].long_term_genres[2],\r\n                    name: 2\r\n                  },\r\n                  {\r\n                    value: 75,\r\n                    label: res.data[0].long_term_genres[3],\r\n                    name: 3\r\n                  },\r\n                  {\r\n                    value: 100,\r\n                    label: res.data[0].long_term_genres[4],\r\n                    name: 4\r\n                  }],\r\n                  selectedGenre: res.data[0].long_term_genres[0]\r\n               });\r\n            this.mappings = {0: res.data[0].long_term_genres[0], 25: res.data[0].long_term_genres[1], 50: res.data[0].long_term_genres[2],\r\n                            75: res.data[0].long_term_genres[3], 100: res.data[0].long_term_genres[4]}\r\n            this.getRecommendedTracks(res.data[0].long_term_genres[0]);\r\n        })\r\n        .catch(err => {\r\n            console.log('yo')\r\n            console.log(err)\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    handleChange = (event, new_val) => {\r\n\r\n\r\n        this.getRecommendedTracks(this.mappings[new_val]);\r\n//        var new_genres = this.state['genres'];\r\n//        new_genres[event.target.name] = event.target.checked;\r\n//        this.setState({ ...this.state, genres: new_genres });\r\n\r\n    }\r\n\r\n\r\n    getRecommendedTracks(genre) {\r\n        let token = cookie.get('access_token');\r\n//        let copy_genres = this.state['genres']\r\n//        let filtered_list = genre_list.filter(function(item,index) {\r\n//            return copy_genres[index] == true;\r\n//        })\r\n        axios.get(`/api/recommended_by_genre/${genre}/${token}/`)\r\n        .then(res => {\r\n            console.log(res.data);\r\n            this.setState(oldState => ({\r\n                followers: oldState.followers,\r\n                getTracks: oldState.getTracks,\r\n                image_url: oldState.image_url,\r\n                long_genre_scores: oldState.long_genre_scores,\r\n                long_term_genres: oldState.long_term_genres,\r\n                short_genre_scores: oldState.short_genre_scores,\r\n                short_term_genres: oldState.short_term_genres,\r\n                subscription: oldState.subscription,\r\n                user_id: oldState.user_id,\r\n                user_url: oldState.user_url,\r\n                username: oldState.username,\r\n                recommended: res.data.search.tracks.items,\r\n                artist_info: res.data.artist_info,\r\n                genres: oldState.genres,\r\n                  selectedGenre: genre\r\n            }));\r\n\r\n\r\n        })\r\n        .catch(err => {\r\n            console.log('yo')\r\n            console.log(err)\r\n        })\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        const styles = {\r\n            root: {\r\n                backgroundColor: 'green !important',\r\n            },\r\n            colorPrimary: {\r\n                backgroundColor: 'green !important',\r\n                color: 'green !important',\r\n            }\r\n\r\n        };\r\n\r\n        console.log(this.state);\r\n        return (\r\n            <div style={{marginTop: `2vh`, marginLeft: '84px', width: '92%'}}>\r\n                {'long_term_genres' in this.state &&\r\n                <div style={{width: '60%', position: 'relative', left: '15%'}}>\r\n                    <Slider classes={styles}\r\n                    defaultValue={0}\r\n                    getAriaValueText={\"\"}\r\n                    aria-labelledby=\"discrete-slider-always\"\r\n                    step={25}\r\n                    color=\"primary\"\r\n                    marks={this.state['genres']}\r\n                    valueLabelDisplay=\"off\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n\r\n                </div>}\r\n\r\n\r\n                {'recommended' in this.state &&\r\n                    <Card width=\"100%\" height=\"100%\" style={{backgroundColor: \"white\", overflow: 'scroll'}} className=\"userinfo-card\">\r\n                        <RecommendedTracksPanel key={this.state['selectedGenre']} {...this.state} />\r\n                    </Card>\r\n                }\r\n\r\n\r\n             {!this.state['username'] &&\r\n                  <div class=\"loading\">\r\n                    <CircularProgress/>\r\n                  </div>\r\n              }\r\n\r\n\r\n            </div>\r\n\r\n        );\r\n\r\n    }\r\n\r\n\r\n\r\n}\r\nexport default RecommendedPage;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//\r\n//\r\n//\r\n//<FormControl onChange={this.getRecommendedTracks} component=\"fieldset\">\r\n//                        <FormLabel component=\"legend\">Recommendations by Genre:</FormLabel>\r\n//                        <FormGroup>\r\n//                          <FormControlLabel\r\n//                            control={<Checkbox checked={this.state['genres'][0]} onChange={this.handleChange} name={0} />}\r\n//                            label={this.state['long_term_genres'][0]}\r\n//                          />\r\n//                          <FormControlLabel\r\n//                            control={<Checkbox checked={this.state['genres'][1]} onChange={this.handleChange} name={1} />}\r\n//                            label={this.state['long_term_genres'][1]}\r\n//                          />\r\n//                          <FormControlLabel\r\n//                            control={<Checkbox checked={this.state['genres'][2]} onChange={this.handleChange} name={2} />}\r\n//                            label={this.state['long_term_genres'][2]}\r\n//                          />\r\n//                          <FormControlLabel\r\n//                            control={<Checkbox checked={this.state['genres'][3]} onChange={this.handleChange} name={3} />}\r\n//                            label={this.state['long_term_genres'][3]}\r\n//                          />\r\n//                          <FormControlLabel\r\n//                            control={<Checkbox checked={this.state['genres'][4]} onChange={this.handleChange} name={4} />}\r\n//                            label={this.state['long_term_genres'][4]}\r\n//                          />\r\n//                        </FormGroup>\r\n//                      </FormControl>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, { useState, useEffect, Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { getSpotifyUser } from './util/auth';\r\nimport Login from './components/login';\r\nimport Home from './components/home/Home';\r\nimport NavBar from './components/common/navbar/Navbar';\r\nimport Logout from './components/logout/Logout';\r\nimport './App.css';\r\nimport {logout} from './util/auth';\r\nimport { User } from 'react-spotify-api';\r\nimport GenreGraphs from './components/graphs/GenreGraphs';\r\nimport GenreMappings from './components/graphs/GenreMappings';\r\nimport ArtistPage from './components/artist/ArtistPage';\r\nimport Dash from './components/dashboard/Dash';\r\nimport TopArtists from './components/top_artists/TopArtists';\r\nimport TopAlbums from './components/top_albums/TopAlbums';\r\nimport SearchTracks from './components/search/SearchTracks';\r\nimport TopTracks from './components/top_tracks/TopTracks';\r\nimport { Nav } from 'react-bootstrap';\r\nimport Sidebar from './components/sidebar/Sidebar';\r\nimport Redirect from './components/common/Redirect.jsx'\r\nimport UserFavorites from './components/favorites/UserFavorites';\r\n\r\nimport TrackPage from './components/track/TrackPage.js'\r\nimport RecommendedPage from './components/recommendations/RecommendedPage.js';\r\n\r\nclass App extends Component{\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props);\r\n    this.state =  {status: 'Not logged in'};\r\n  }\r\n\r\n  search = (term) => {\r\n    console.log(this.state)\r\n    let currStatus = ('status' in this.state ? this.state['status'] : null);\r\n    let currInfo = 'userInfo' in this.state ? this.state['userInfo'] : null;\r\n    this.setState({\r\n        status: currStatus,\r\n        userInfo: currInfo,\r\n        searchTerm: term\r\n    },console.log(\"EMEMEMEMEM\"+currStatus+\", \"+currInfo));\r\n\r\n  }\r\n\r\n\r\n  setUserInfo = (userInfo) => this.setState({ userInfo });\r\n\r\n  async componentDidMount() {\r\n    const userInfo = await getSpotifyUser();\r\n    if (userInfo) {\r\n      this.setUserInfo(userInfo);\r\n    }\r\n  }\r\n  render(){\r\n    const { userInfo } = this.state;\r\n    console.log(userInfo);\r\n    return (\r\n      <div className=\"App\">\r\n        <link rel=\"stylesheet\" href=\"//cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css\" />\r\n        <Router>\r\n          <div style={{height:'100%'}}>\r\n            <Switch>\r\n              <Route exact path=\"/login\" component={(props) =>\r\n                <Login {...props} setUserInfo={this.setUserInfo} userInfo={userInfo} />\r\n              }/>\r\n              <Route exact path=\"/\" component={(props) =>\r\n                (userInfo == 'Not logged in') || !(userInfo) || ('status' in userInfo && userInfo['status'] == 'Not logged in') ?\r\n                 <Login {...props} setUserInfo={this.setUserInfo} userInfo={userInfo} />\r\n                 : <div>\r\n                <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                 <Dash userInfo={userInfo}/>\r\n                 </div>\r\n              }/>\r\n              <Route exact path=\"/logout\" component={(props) =>\r\n                 <Logout userInfo={userInfo} />\r\n               }/>\r\n\r\n              <Route exact path=\"/top_tracks\">\r\n                <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                <TopTracks/>\r\n              </Route>\r\n              <Route exact path=\"/graphs\">\r\n                <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                <GenreGraphs />\r\n              </Route>\r\n              <Route exact path=\"/artist/:uri\" render={(props) =>\r\n                <div style={{height:'100%'}}>\r\n                <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                <ArtistPage style={{height:'100%'}} id={props.match.params} />\r\n                </div>\r\n               } />\r\n               <Route exact path=\"/search/:term\" render={(props) =>\r\n                <div style={{height:'100%'}}>\r\n                <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                <SearchTracks style={{height:'100%'}} id={props.match.params} />\r\n                </div>\r\n               } />\r\n               <Route exact path=\"/track/:uri\" render={(props) =>\r\n                <div style={{height:'100%'}}>\r\n                <Sidebar playback={true} id={props.match.params} searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                <TrackPage style={{height:'100%'}} id={props.match.params.uri} />\r\n                </div>\r\n               } />\r\n               <Route exact path=\"/top_artists\">\r\n               <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                <TopArtists/>\r\n               </Route>\r\n               <Route exact path=\"/top_albums\">\r\n                 <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                 <TopAlbums/>\r\n               </Route>\r\n               <Route exact path=\"/dashboard\">\r\n                 <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                 <Dash userInfo={userInfo}/>\r\n               </Route>\r\n               <Route exact path=\"/favorites\">\r\n               <Sidebar userInfo={userInfo}/>\r\n               <UserFavorites userInfo={userInfo}/>\r\n               </Route>\r\n               \r\n               <Route exact path=\"/recommended\">\r\n                 <Sidebar searchFunc={this.search} searchTerm={this.state['searchTerm']} userInfo={userInfo}/>\r\n                 <RecommendedPage/>\r\n               </Route>\r\n\r\n            </Switch>\r\n          </div>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { SpotifyApiAxiosContext, SpotifyApiContext } from 'react-spotify-api';\r\nimport axios from 'axios';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();"],"sourceRoot":""}